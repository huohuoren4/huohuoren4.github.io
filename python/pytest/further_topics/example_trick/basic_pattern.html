<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Basic patterns and examples | G-Tester</title>
    <meta name="description" content="Make Testing Automated And Intelligent">
    <link rel="preload stylesheet" href="/assets/style.014aa8c9.css" as="style">
    
    <script type="module" src="/assets/app.003dbf61.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.2ed14f66.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/framework.b5656a4e.js">
    <link rel="modulepreload" href="/assets/chunks/theme.0c9ae56c.js">
    <link rel="modulepreload" href="/assets/python_pytest_further_topics_example_trick_basic_pattern.md.e8bbbb18.lean.js">
    <link rel="icon" href="/favicon.ico">
    <script id="check-dark-light">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-f793074e><!--[--><!--]--><!--[--><span tabindex="-1" data-v-75193883></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-75193883> Skip to content </a><!--]--><!----><header class="VPNav" data-v-f793074e data-v-84d1bf7f><div class="VPNavBar has-sidebar" data-v-84d1bf7f data-v-b3eb6b8e><div class="container" data-v-b3eb6b8e><div class="title" data-v-b3eb6b8e><div class="VPNavBarTitle has-sidebar" data-v-b3eb6b8e data-v-97b80f4c><a class="title" href="/" data-v-97b80f4c><!--[--><!--]--><!--[--><img class="VPImage logo" src="/favicon.ico" alt data-v-753882de><!--]--><!--[-->G-Tester<!--]--><!--[--><!--]--></a></div></div><div class="content" data-v-b3eb6b8e><div class="curtain" data-v-b3eb6b8e></div><div class="content-body" data-v-b3eb6b8e><!--[--><!--]--><div class="VPNavBarSearch search" style="--vp-meta-key:&#39;Meta&#39;;" data-v-b3eb6b8e><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg class="DocSearch-Search-Icon" width="20" height="20" viewBox="0 0 20 20" aria-label="search icon"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-b3eb6b8e data-v-6f66f9f0><span id="main-nav-aria-label" class="visually-hidden" data-v-6f66f9f0>Main Navigation</span><!--[--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f66f9f0 data-v-7f27eb00><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7f27eb00><span class="text" data-v-7f27eb00><!----><span data-v-7f27eb00>Notice 📢</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-7f27eb00><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-7f27eb00><div class="VPMenu" data-v-7f27eb00 data-v-b7397b9c><div class="items" data-v-b7397b9c><!--[--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link" href="/plan" data-v-97af5513><!--[-->Plan 🟡<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link" href="/..." data-v-97af5513><!--[-->Message 🔔<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f66f9f0 data-v-7f27eb00><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7f27eb00><span class="text" data-v-7f27eb00><!----><span data-v-7f27eb00>Python</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-7f27eb00><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-7f27eb00><div class="VPMenu" data-v-7f27eb00 data-v-b7397b9c><div class="items" data-v-b7397b9c><!--[--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://docs.python.org/3.7/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->doc<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b7397b9c data-v-5aa554d8><p class="title" data-v-5aa554d8>Test Automatic</p><!--[--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link active" href="/python/pytest/home" data-v-97af5513><!--[-->pytest 🟢<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link" href="/python/allure/get_start" data-v-97af5513><!--[-->allure 🟡<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://pluggy.readthedocs.io/en/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->pluggy<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://pytest-xdist.readthedocs.io/en/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->pytest-xdist<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://www.selenium.dev/documentation/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->selenium<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://requests.readthedocs.io/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->requests<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://requests.readthedocs.io/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->paramiko<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b7397b9c data-v-5aa554d8><p class="title" data-v-5aa554d8>Test Intelligence</p><!--[--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://pytorch.org/tutorials/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->pytorch<!--]--></a></div><!--]--><!--]--></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b7397b9c data-v-5aa554d8><p class="title" data-v-5aa554d8>Awesome Flask</p><!--[--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link" href="/python/flask/home" data-v-97af5513><!--[-->flask 🟡<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://click.palletsprojects.com/en/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->click<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://werkzeug.palletsprojects.com/en/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->werkzeug<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://flask-restful.readthedocs.io/en/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->flask-restful<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://flask-admin.readthedocs.io/en/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->flask-admin<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://docs.celeryq.dev/en/stable/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->celery<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f66f9f0 data-v-7f27eb00><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7f27eb00><span class="text" data-v-7f27eb00><!----><span data-v-7f27eb00>Golang</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-7f27eb00><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-7f27eb00><div class="VPMenu" data-v-7f27eb00 data-v-b7397b9c><div class="items" data-v-b7397b9c><!--[--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://golang.google.cn/doc/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->doc<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b7397b9c data-v-5aa554d8><p class="title" data-v-5aa554d8>Web Framework</p><!--[--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://gin-gonic.com/docs/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->gin<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f66f9f0 data-v-7f27eb00><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7f27eb00><span class="text" data-v-7f27eb00><!----><span data-v-7f27eb00>Vue</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-7f27eb00><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-7f27eb00><div class="VPMenu" data-v-7f27eb00 data-v-b7397b9c><div class="items" data-v-b7397b9c><!--[--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://vuejs.org/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->doc<!--]--></a></div><!--]--><!--[--><div class="VPMenuGroup" data-v-b7397b9c data-v-5aa554d8><p class="title" data-v-5aa554d8>Awesome Vue</p><!--[--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://vitejs.dev/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->vite<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://vitepress.dev/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->vitepress<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-5aa554d8 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://element-plus.org/en-US/" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->element plus<!--]--></a></div><!--]--><!--]--></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--[--><div class="VPFlyout VPNavBarMenuGroup" data-v-6f66f9f0 data-v-7f27eb00><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-7f27eb00><span class="text" data-v-7f27eb00><!----><span data-v-7f27eb00>Resources</span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-7f27eb00><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-7f27eb00><div class="VPMenu" data-v-7f27eb00 data-v-b7397b9c><div class="items" data-v-b7397b9c><!--[--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link" href="/..." data-v-97af5513><!--[-->Team<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link" href="/..." data-v-97af5513><!--[-->Releases<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link" href="/..." data-v-97af5513><!--[-->Contribution<!--]--></a></div><!--]--><!--[--><div class="VPMenuLink" data-v-b7397b9c data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://github.com/huohuoren4/docs.git" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->Help Us Translate😄<!--]--></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><div class="VPFlyout VPNavBarTranslations translations" data-v-b3eb6b8e data-v-6e681f81 data-v-7f27eb00><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="Change language" data-v-7f27eb00><span class="text" data-v-7f27eb00><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="option-icon" data-v-7f27eb00><path d="M0 0h24v24H0z" fill="none"></path><path d=" M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z " class="css-c4d79v"></path></svg><!----><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="text-icon" data-v-7f27eb00><path d="M12,16c-0.3,0-0.5-0.1-0.7-0.3l-6-6c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l5.3,5.3l5.3-5.3c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-6,6C12.5,15.9,12.3,16,12,16z"></path></svg></span></button><div class="menu" data-v-7f27eb00><div class="VPMenu" data-v-7f27eb00 data-v-b7397b9c><!----><!--[--><!--[--><div class="items" data-v-6e681f81><p class="title" data-v-6e681f81>English</p><!--[--><div class="VPMenuLink" data-v-6e681f81 data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://huohuoren4.github.io/docs/python/pytest/further_topics/example_trick/basic_pattern" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->简体中文<!--]--></a></div><!--]--></div><!--]--><!--]--></div></div></div><div class="VPNavBarAppearance appearance" data-v-b3eb6b8e data-v-786b7af9><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-786b7af9 data-v-1d457c25 data-v-c68e53de><span class="check" data-v-c68e53de><span class="icon" data-v-c68e53de><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1d457c25><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1d457c25><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-b3eb6b8e data-v-9a8c30ed data-v-3417664a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/huohuoren4/docs.git" aria-label="github" target="_blank" rel="noopener" data-v-3417664a data-v-bdcbfcbf><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-b3eb6b8e data-v-19ea461a data-v-7f27eb00><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-7f27eb00><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="icon" data-v-7f27eb00><circle cx="12" cy="12" r="2"></circle><circle cx="19" cy="12" r="2"></circle><circle cx="5" cy="12" r="2"></circle></svg></button><div class="menu" data-v-7f27eb00><div class="VPMenu" data-v-7f27eb00 data-v-b7397b9c><!----><!--[--><!--[--><div class="group translations" data-v-19ea461a><p class="trans-title" data-v-19ea461a>English</p><!--[--><div class="VPMenuLink" data-v-19ea461a data-v-97af5513><a class="VPLink link vp-external-link-icon" href="https://huohuoren4.github.io/docs/python/pytest/further_topics/example_trick/basic_pattern" target="_blank" rel="noreferrer" data-v-97af5513><!--[-->简体中文<!--]--></a></div><!--]--></div><div class="group" data-v-19ea461a><div class="item appearance" data-v-19ea461a><p class="label" data-v-19ea461a>Appearance</p><div class="appearance-action" data-v-19ea461a><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title="toggle dark mode" aria-checked="false" data-v-19ea461a data-v-1d457c25 data-v-c68e53de><span class="check" data-v-c68e53de><span class="icon" data-v-c68e53de><!--[--><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="sun" data-v-1d457c25><path d="M12,18c-3.3,0-6-2.7-6-6s2.7-6,6-6s6,2.7,6,6S15.3,18,12,18zM12,8c-2.2,0-4,1.8-4,4c0,2.2,1.8,4,4,4c2.2,0,4-1.8,4-4C16,9.8,14.2,8,12,8z"></path><path d="M12,4c-0.6,0-1-0.4-1-1V1c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,3.6,12.6,4,12,4z"></path><path d="M12,24c-0.6,0-1-0.4-1-1v-2c0-0.6,0.4-1,1-1s1,0.4,1,1v2C13,23.6,12.6,24,12,24z"></path><path d="M5.6,6.6c-0.3,0-0.5-0.1-0.7-0.3L3.5,4.9c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C6.2,6.5,5.9,6.6,5.6,6.6z"></path><path d="M19.8,20.8c-0.3,0-0.5-0.1-0.7-0.3l-1.4-1.4c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l1.4,1.4c0.4,0.4,0.4,1,0,1.4C20.3,20.7,20,20.8,19.8,20.8z"></path><path d="M3,13H1c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S3.6,13,3,13z"></path><path d="M23,13h-2c-0.6,0-1-0.4-1-1s0.4-1,1-1h2c0.6,0,1,0.4,1,1S23.6,13,23,13z"></path><path d="M4.2,20.8c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C4.7,20.7,4.5,20.8,4.2,20.8z"></path><path d="M18.4,6.6c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l1.4-1.4c0.4-0.4,1-0.4,1.4,0s0.4,1,0,1.4l-1.4,1.4C18.9,6.5,18.6,6.6,18.4,6.6z"></path></svg><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="moon" data-v-1d457c25><path d="M12.1,22c-0.3,0-0.6,0-0.9,0c-5.5-0.5-9.5-5.4-9-10.9c0.4-4.8,4.2-8.6,9-9c0.4,0,0.8,0.2,1,0.5c0.2,0.3,0.2,0.8-0.1,1.1c-2,2.7-1.4,6.4,1.3,8.4c2.1,1.6,5,1.6,7.1,0c0.3-0.2,0.7-0.3,1.1-0.1c0.3,0.2,0.5,0.6,0.5,1c-0.2,2.7-1.5,5.1-3.6,6.8C16.6,21.2,14.4,22,12.1,22zM9.3,4.4c-2.9,1-5,3.6-5.2,6.8c-0.4,4.4,2.8,8.3,7.2,8.7c2.1,0.2,4.2-0.4,5.8-1.8c1.1-0.9,1.9-2.1,2.4-3.4c-2.5,0.9-5.3,0.5-7.5-1.1C9.2,11.4,8.1,7.7,9.3,4.4z"></path></svg><!--]--></span></span></button></div></div></div><div class="group" data-v-19ea461a><div class="item social-links" data-v-19ea461a><div class="VPSocialLinks social-links-list" data-v-19ea461a data-v-3417664a><!--[--><a class="VPSocialLink no-icon" href="https://github.com/huohuoren4/docs.git" aria-label="github" target="_blank" rel="noopener" data-v-3417664a data-v-bdcbfcbf><svg role="img" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><title>GitHub</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"/></svg></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-b3eb6b8e data-v-2fbebdb8><span class="container" data-v-2fbebdb8><span class="top" data-v-2fbebdb8></span><span class="middle" data-v-2fbebdb8></span><span class="bottom" data-v-2fbebdb8></span></span></button></div></div></div></div><!----></header><div class="VPLocalNav reached-top" data-v-f793074e data-v-bda022bc><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-bda022bc><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="menu-icon" data-v-bda022bc><path d="M17,11H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,11,17,11z"></path><path d="M21,7H3C2.4,7,2,6.6,2,6s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,7,21,7z"></path><path d="M21,15H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h18c0.6,0,1,0.4,1,1S21.6,15,21,15z"></path><path d="M17,19H3c-0.6,0-1-0.4-1-1s0.4-1,1-1h14c0.6,0,1,0.4,1,1S17.6,19,17,19z"></path></svg><span class="menu-text" data-v-bda022bc>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-bda022bc data-v-343cbbf1><button data-v-343cbbf1>Return to top</button><!----></div></div><aside class="VPSidebar" data-v-f793074e data-v-2a3b7d73><div class="curtain" data-v-2a3b7d73></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-2a3b7d73><span class="visually-hidden" id="sidebar-aria-label" data-v-2a3b7d73> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="group" data-v-2a3b7d73><section class="VPSidebarItem level-0 has-active" data-v-2a3b7d73 data-v-c9b05690><div class="item" role="button" tabindex="0" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><h2 class="text" data-v-c9b05690>Pytest v7.4.0</h2><!----></div><div class="items" data-v-c9b05690><!--[--><div class="VPSidebarItem level-1 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/home" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Home</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-1 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/get_started" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Get Started</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c9b05690 data-v-c9b05690><div class="item" role="button" tabindex="0" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><h3 class="text" data-v-c9b05690>How-to guides</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c9b05690><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c9b05690><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c9b05690><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/invoke_pytest" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to invoke pytest</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/assert" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to write and report assertions in tests</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/fixture" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to use fixtures</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/mark" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to mark test functions with attributes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/params_fixture" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to parametrize fixtures and test functions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/temp" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to use temporary directories and files in tests</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/mock" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to monkeypatch/mock modules and environments</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/doctest" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to run doctests</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/re_run" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to re-run failed tests and maintain state between test runs</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/logging" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to manage logging</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/output" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to capture stdout/stderr output</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/warning" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to capture warnings</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/skip_xfail" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to use skip and xfail to deal with tests that cannot succeed</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/use_plugin" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to install and use plugins</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/write_plugin" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Writing plugins</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/hook_func" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Writing hook functions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/test_suite" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to use pytest with an existing test suite</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/unittest" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to use unittest-based tests with pytest</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/nose_test" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to run tests written for nose</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/xunit" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to implement xunit-style set-up</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/how_to_guides/bash_completion" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>How to set up bash completion</p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c9b05690 data-v-c9b05690><div class="item" role="button" tabindex="0" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><h3 class="text" data-v-c9b05690>Reference guides</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c9b05690><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c9b05690><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c9b05690><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/fixture_reference" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Fixtures reference</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/plugin_list" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Plugin List</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/configuration" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Configuration</p><!--]--></a><!----></div><!----></div><section class="VPSidebarItem level-2 collapsible collapsed" data-v-c9b05690 data-v-c9b05690><div class="item" role="button" tabindex="0" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><h4 class="text" data-v-c9b05690>API Reference</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c9b05690><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c9b05690><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c9b05690><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/constants" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Constants</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/functions" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Functions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/marks" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Marks</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/fixtures" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Fixtures</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/hooks" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Hooks</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/collection" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Collection tree objects</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/objects" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Objects</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/global_variables" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Global Variables</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/env_variables" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Environment Variables</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/exceptions" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Exceptions</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/warnings" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Warnings</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/config_options" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Configuration Options</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/reference_guides/api_reference/cmd_flags" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Command-line Flags</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section><section class="VPSidebarItem level-1 collapsible collapsed" data-v-c9b05690 data-v-c9b05690><div class="item" role="button" tabindex="0" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><h3 class="text" data-v-c9b05690>Explanation</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c9b05690><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c9b05690><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c9b05690><!--[--><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/explanation/anatomy" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Anatomy of a test</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/explanation/about_fixture" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>About fixtures</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/explanation/integration_practice" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Good Integration Practices</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/explanation/flaky_test" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Flaky tests</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/explanation/import_mechanism" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>pytest import mechanisms </p><!--]--></a><!----></div><!----></div><!--]--></div></section><section class="VPSidebarItem level-1 collapsible has-active" data-v-c9b05690 data-v-c9b05690><div class="item" role="button" tabindex="0" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><h3 class="text" data-v-c9b05690>Further topics</h3><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c9b05690><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c9b05690><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c9b05690><!--[--><section class="VPSidebarItem level-2 collapsible has-active" data-v-c9b05690 data-v-c9b05690><div class="item" role="button" tabindex="0" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><h4 class="text" data-v-c9b05690>Examples and customization tricks</h4><div class="caret" role="button" aria-label="toggle section" tabindex="0" data-v-c9b05690><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" viewbox="0 0 24 24" class="caret-icon" data-v-c9b05690><path d="M9,19c-0.3,0-0.5-0.1-0.7-0.3c-0.4-0.4-0.4-1,0-1.4l5.3-5.3L8.3,6.7c-0.4-0.4-0.4-1,0-1.4s1-0.4,1.4,0l6,6c0.4,0.4,0.4,1,0,1.4l-6,6C9.5,18.9,9.3,19,9,19z"></path></svg></div></div><div class="items" data-v-c9b05690><!--[--><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/content" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Contents</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/failure_report" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Demo of Python failure reports with pytest</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/basic_pattern" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Basic patterns and examples</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/parametrize" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Parametrizing tests</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/custom_mark" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Working with custom markers</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/session_fixture" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>A session-fixture which can look at all collected tests</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/test_discovery" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Changing standard (Python) test discovery</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-3 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/example_trick/work" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Working with non-python tests</p><!--]--></a><!----></div><!----></div><!--]--></div></section><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/compatibility" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Backwards Compatibility Policy</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/deprecation" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Deprecations and Removals</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/contribution" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Contribution getting started</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/development_guide" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Development Guide</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/sponsor" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Sponsor</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/enterprise" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>pytest for enterprise</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/license" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>License</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/contact" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Contact channels</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/history" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>History</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/historical_note" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Historical Notes</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/talk_tutorial" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Talks and Tutorials</p><!--]--></a><!----></div><!----></div><div class="VPSidebarItem level-2 is-link" data-v-c9b05690 data-v-c9b05690><div class="item" data-v-c9b05690><div class="indicator" data-v-c9b05690></div><a class="VPLink link link" href="/python/pytest/further_topics/announcement" data-v-c9b05690><!--[--><p class="text" data-v-c9b05690>Release announcements</p><!--]--></a><!----></div><!----></div><!--]--></div></section><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-f793074e data-v-97316eed><div class="VPDoc has-sidebar has-aside" data-v-97316eed data-v-3b678f29><!--[--><!--]--><div class="container" data-v-3b678f29><div class="aside" data-v-3b678f29><div class="aside-curtain" data-v-3b678f29></div><div class="aside-container" data-v-3b678f29><div class="aside-content" data-v-3b678f29><div class="VPDocAside" data-v-3b678f29 data-v-76113cf9><!--[--><!--]--><!--[--><!--]--><div class="VPDocAsideOutline" data-v-76113cf9 data-v-92a212e2><div class="content" data-v-92a212e2><div class="outline-marker" data-v-92a212e2></div><div class="outline-title" data-v-92a212e2>On this page</div><nav aria-labelledby="doc-outline-aria-label" data-v-92a212e2><span class="visually-hidden" id="doc-outline-aria-label" data-v-92a212e2> Table of Contents for current page </span><ul class="root" data-v-92a212e2 data-v-6824dd23><!--[--><!--]--></ul></nav></div></div><!--[--><!--]--><div class="spacer" data-v-76113cf9></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-3b678f29><div class="content-container" data-v-3b678f29><!--[--><!--]--><!----><main class="main" data-v-3b678f29><div style="position:relative;" class="vp-doc _python_pytest_further_topics_example_trick_basic_pattern" data-v-3b678f29><div><h1 id="basic-patterns-and-examples" tabindex="-1">Basic patterns and examples <a class="header-anchor" href="#basic-patterns-and-examples" aria-label="Permalink to &quot;Basic patterns and examples {#basic-patterns-and-examples}&quot;">​</a></h1><h2 id="how-to-change-command-line-options-defaults" tabindex="-1">How to change command line options defaults <a class="header-anchor" href="#how-to-change-command-line-options-defaults" aria-label="Permalink to &quot;How to change command line options defaults {#how-to-change-command-line-options-defaults}&quot;">​</a></h2><p>It can be tedious to type the same series of command line options every time you use <code>pytest</code>. For example, if you always want to see detailed info on skipped and xfailed tests, as well as have terser “dot” progress output, you can write it into a configuration file:</p><div class="language-ini"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of pytest.ini</span></span>
<span class="line"><span style="color:#89DDFF;">[pytest]</span></span>
<span class="line"><span style="color:#F07178;">addopts</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> -ra -q</span></span></code></pre></div><p>Alternatively, you can set a <code>PYTEST_ADDOPTS</code> environment variable to add command line options while the environment is in use:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">export</span><span style="color:#A6ACCD;"> PYTEST_ADDOPTS</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-v</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>Here’s how the command-line is built in the presence of <code>addopts</code> or the environment variable:</p><div class="language-xml"><button title="Copy Code" class="copy"></button><span class="lang">xml</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">pytest.ini</span><span style="color:#89DDFF;">:</span><span style="color:#F07178;">addopts</span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> $PYTEST_ADDOPTS </span><span style="color:#89DDFF;">&lt;</span><span style="color:#F07178;">extra</span><span style="color:#89DDFF;"> command-line arguments&gt;</span></span></code></pre></div><p>So if the user executes in the command-line:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">slow</span></span></code></pre></div><p>The actual command line executed is:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-ra</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-m</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">slow</span></span></code></pre></div><p>Note that as usual for other command-line applications, in case of conflicting options the last one wins, so the example above will show verbose output because <code>-v</code> overwrites <code>-q</code>.</p><h2 id="pass-different-values-to-a-test-function-depending-on-command-line-options" tabindex="-1">Pass different values to a test function, depending on command line options <a class="header-anchor" href="#pass-different-values-to-a-test-function-depending-on-command-line-options" aria-label="Permalink to &quot;Pass different values to a test function, depending on command line options {#pass-different-values-to-a-test-function-depending-on-command-line-options}&quot;">​</a></h2><p>Suppose we want to write a test that depends on a command line option. Here is a basic pattern to achieve this:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_sample.py</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_answer</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">cmdopt</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> cmdopt </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">first</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">elif</span><span style="color:#A6ACCD;"> cmdopt </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">second</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># to see what was printed</span></span></code></pre></div><p>For this to work we need to add a command line option and provide the <code>cmdopt</code> through a <a href="/python/pytest/reference_guides/fixture_reference#fixtures-reference">fixture function</a>:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_addoption</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">parser</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    parser</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addoption</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--cmdopt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">store</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">default</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">help</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my option: type1 or type2</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fixture</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">cmdopt</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getoption</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--cmdopt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>Let’s run this without supplying our new option:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_sample.py</span></span>
<span class="line"><span style="color:#FFCB6B;">F</span><span style="color:#A6ACCD;">                                                                    [100%]</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_answer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">cmdopt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_answer</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">cmdopt</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">cmdopt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">&quot;first&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">elif</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">cmdopt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">&quot;second&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0  </span><span style="color:#676E95;font-style:italic;"># to see what was printed</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_sample.py:6:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#FFCB6B;">---------------------------</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Captured</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">call</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---------------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">first</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_sample.py::test_answer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span></span></code></pre></div><p>And now with supplying a command line option:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--cmdopt=type2</span></span>
<span class="line"><span style="color:#FFCB6B;">F</span><span style="color:#A6ACCD;">                                                                    [100%]</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_answer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">cmdopt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">type2</span><span style="color:#89DDFF;">&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_answer</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">cmdopt</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">cmdopt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">&quot;first&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">elif</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">cmdopt</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#82AAFF;">print</span><span style="color:#A6ACCD;">(</span><span style="color:#FFCB6B;">&quot;second&quot;</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0  </span><span style="color:#676E95;font-style:italic;"># to see what was printed</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_sample.py:6:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#FFCB6B;">---------------------------</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Captured</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">call</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---------------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">second</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_sample.py::test_answer</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span></span></code></pre></div><p>You can see that the command line option arrived in our test.</p><p>We could add simple validation for the input by listing the choices:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"><span style="color:#FFCB6B;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest_addoption</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">parser</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">parser.addoption(</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">&quot;--cmdopt&quot;</span><span style="color:#FFCB6B;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">store</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        default</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        help</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my option: type1 or type2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">        choices</span><span style="color:#89DDFF;">=(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#FFCB6B;">,</span></span>
<span class="line"><span style="color:#A6ACCD;">    )</span></span></code></pre></div><p>Now we’ll get feedback on a bad argument:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--cmdopt=type3</span></span>
<span class="line"><span style="color:#FFCB6B;">ERROR:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">usage:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> [options] </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">file_or_dir</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">file_or_dir</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">...</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">pytest:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">error:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">argument</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--cmdopt:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">invalid</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">choice:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">type3</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> (choose </span><span style="color:#C3E88D;">from</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">type2</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;">)</span></span></code></pre></div><p>If you need to provide more detailed error messages, you can use the <code>type</code> parameter and raise <code>pytest.UsageError</code>:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">type_checker</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">value</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    msg </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">cmdopt must specify a numeric type as typeNNN</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> value</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">startswith</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">raise</span><span style="color:#A6ACCD;"> pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">UsageError</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">msg</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">try</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#FFCB6B;">int</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">value</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">4</span><span style="color:#89DDFF;">:])</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">except</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ValueError</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">raise</span><span style="color:#A6ACCD;"> pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">UsageError</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">msg</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> value</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_addoption</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">parser</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    parser</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addoption</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--cmdopt</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#A6ACCD;font-style:italic;">action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">store</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#A6ACCD;font-style:italic;">default</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">type1</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#A6ACCD;font-style:italic;">help</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">my option: type1 or type2</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#A6ACCD;font-style:italic;">type</span><span style="color:#89DDFF;">=</span><span style="color:#82AAFF;">type_checker</span><span style="color:#89DDFF;">,</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>This completes the basic pattern. However, one often rather wants to process command line options outside of the test and rather pass in different or more complex objects.</p><h2 id="dynamically-adding-command-line-options" tabindex="-1">Dynamically adding command line options <a class="header-anchor" href="#dynamically-adding-command-line-options" aria-label="Permalink to &quot;Dynamically adding command line options {#dynamically-adding-command-line-options}&quot;">​</a></h2><p>Through <code>addopts</code> you can statically add command line options for your project. You can also dynamically modify the command line arguments before they get processed:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># setuptools plugin</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> sys</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_load_initial_conftests</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">args</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">xdist</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> sys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">modules</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># pytest-xdist plugin</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> multiprocessing</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">        num </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">max</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">multiprocessing</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">cpu_count</span><span style="color:#89DDFF;">()</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">/</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        args</span><span style="color:#89DDFF;">[:]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">-n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">num</span><span style="color:#89DDFF;">)]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">+</span><span style="color:#A6ACCD;"> args</span></span></code></pre></div><p>If you have the xdist plugin installed you will now always perform test runs using a number of subprocesses close to your CPU. Running in an empty directory with the above <code>conftest.py</code>:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">========================== </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ran</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">===========================</span></span></code></pre></div><h2 id="control-skipping-of-tests-according-to-command-line-option" tabindex="-1">Control skipping of tests according to command line option <a class="header-anchor" href="#control-skipping-of-tests-according-to-command-line-option" aria-label="Permalink to &quot;Control skipping of tests according to command line option {#control-skipping-of-tests-according-to-command-line-option}&quot;">​</a></h2><p>Here is a <code>conftest.py</code> file adding a <code>--runslow</code> command line option to control skipping of <code>pytest.mark.slow</code> marked tests:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_addoption</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">parser</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    parser</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addoption</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">        </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--runslow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">action</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">store_true</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">default</span><span style="color:#89DDFF;">=False,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">help</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">run slow tests</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#82AAFF;">    </span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_configure</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">config</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    config</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">addinivalue_line</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">markers</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">slow: mark test as slow to run</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_collection_modifyitems</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">config</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">items</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> config</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getoption</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--runslow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># --runslow given in cli: do not skip slow tests</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span></span>
<span class="line"><span style="color:#A6ACCD;">    skip_slow </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> pytest</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">skip</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">reason</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">need --runslow option to run</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> item </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> items</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">slow</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">keywords</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            item</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">add_marker</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">skip_slow</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>We can now write a test module like this:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_module.py</span></span>
<span class="line"><span style="color:#FFCB6B;">import</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_func_fast</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">@pytest.mark.slow</span></span>
<span class="line"><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_func_slow</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">pass</span></span></code></pre></div><p>and when running it will see a skipped “slow” test:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rs</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># &quot;-rs&quot; means report details on the little &#39;s&#39;</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.s</span><span style="color:#A6ACCD;">                                                    [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">SKIPPED</span><span style="color:#A6ACCD;"> [1] test_module.py:8: need --runslow option to run</span></span>
<span class="line"><span style="color:#A6ACCD;">======================= </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">skipped</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=======================</span></span></code></pre></div><p>Or run it including the slow marked test:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--runslow</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">..</span><span style="color:#A6ACCD;">                                                    [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">============================ </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=============================</span></span></code></pre></div><h2 id="writing-well-integrated-assertion-helpers" tabindex="-1">Writing well integrated assertion helpers <a class="header-anchor" href="#writing-well-integrated-assertion-helpers" aria-label="Permalink to &quot;Writing well integrated assertion helpers {#writing-well-integrated-assertion-helpers}&quot;">​</a></h2><p>If you have a test helper function called from a test you can use the <code>pytest.fail</code> marker to fail a test with a certain message. The test support function will not show up in the traceback if you set the <code>__tracebackhide__</code> option somewhere in the helper function. Example:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_checkconfig.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">checkconfig</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    __tracebackhide__ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">True</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hasattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">x</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fail</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;not configured: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">x</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_something</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">checkconfig</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">42</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>The <code>__tracebackhide__</code> setting influences <code>pytest</code> showing of tracebacks: the <code>checkconfig</code> function will not be shown unless the <code>--full-trace</code> command line option is specified. Let’s run our little function:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_checkconfig.py</span></span>
<span class="line"><span style="color:#FFCB6B;">F</span><span style="color:#A6ACCD;">                                                                    [100%]</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_something</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_something</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       checkconfig</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">42</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">configured:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_checkconfig.py:11:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_checkconfig.py::test_something</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">configured:</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span></span>
<span class="line"><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span></span></code></pre></div><p>If you only want to hide certain exceptions, you can set <code>__tracebackhide__</code> to a callable which gets the <code>ExceptionInfo</code> object. You can for example use this to make sure unexpected exception types aren’t hidden:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> operator</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">ConfigException</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">Exception</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">checkconfig</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">x</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    __tracebackhide__ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> operator</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">methodcaller</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">errisinstance</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> ConfigException</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hasattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">x</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">config</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">raise</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">ConfigException</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;not configured: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">x</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_something</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">checkconfig</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">42</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>This will avoid hiding the exception traceback on unrelated exceptions (i.e. bugs in assertion helpers).</p><h2 id="detect-if-running-from-within-a-pytest-run" tabindex="-1">Detect if running from within a pytest run <a class="header-anchor" href="#detect-if-running-from-within-a-pytest-run" aria-label="Permalink to &quot;Detect if running from within a pytest run {#detect-if-running-from-within-a-pytest-run}&quot;">​</a></h2><p>Usually it is a bad idea to make application code behave differently if called from a test. But if you absolutely must find out if your application code is running from a test you can do something like this:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of your_module.py</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">_called_from_test </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">False</span></span></code></pre></div><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_configure</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">config</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    your_module</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_called_from_test</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">True</span></span></code></pre></div><p>and then check for the <code>your_module._called_from_test</code> flag:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> your_module</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">_called_from_test</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># called from within a test run</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># called &quot;normally&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span></code></pre></div><p>accordingly in your application.</p><h2 id="adding-info-to-test-report-header" tabindex="-1">Adding info to test report header <a class="header-anchor" href="#adding-info-to-test-report-header" aria-label="Permalink to &quot;Adding info to test report header {#adding-info-to-test-report-header}&quot;">​</a></h2><p>It’s easy to present extra information in a <code>pytest</code> run:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_report_header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">config</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">project deps: mylib-1.1</span><span style="color:#89DDFF;">&quot;</span></span></code></pre></div><p>which will add the string to the test header accordingly:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">project</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">deps:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">mylib-1.1</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">========================== </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ran</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">===========================</span></span></code></pre></div><p>It is also possible to return a list of strings which will be considered as several lines of information. You may consider <code>config.getoption(&#39;verbose&#39;)</code> in order to display more information if applicable:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_report_header</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">config</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> config</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">getoption</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">verbose</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">info1: did you know that ...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">did you?</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span></span></code></pre></div><p>which will add info only when run with <code>“–v”</code>:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-v</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> $PYTHON_PREFIX</span><span style="color:#C3E88D;">/bin/python</span></span>
<span class="line"><span style="color:#FFCB6B;">cachedir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.pytest_cache</span></span>
<span class="line"><span style="color:#FFCB6B;">info1:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">did</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">know</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">that</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span></span>
<span class="line"><span style="color:#FFCB6B;">did</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">you?</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collecting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">========================== </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ran</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">===========================</span></span></code></pre></div><p>and nothing when run plainly:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">========================== </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ran</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">===========================</span></span></code></pre></div><h2 id="profiling-test-duration" tabindex="-1">Profiling test duration <a class="header-anchor" href="#profiling-test-duration" aria-label="Permalink to &quot;Profiling test duration {#profiling-test-duration}&quot;">​</a></h2><p>If you have a slow running large test suite you might want to find out which tests are the slowest. Let’s make an artificial test suite:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_some_are_slow.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> time</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_funcfast</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.1</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_funcslow1</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.2</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_funcslow2</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    time</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">sleep</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">0.3</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>Now we can profile which test functions execute the slowest:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--durations=3</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_some_are_slow.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">...</span><span style="color:#A6ACCD;">                                            [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">slowest</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">durations</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">0.30s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">call</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">test_some_are_slow.py::test_funcslow2</span></span>
<span class="line"><span style="color:#FFCB6B;">0.20s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">call</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">test_some_are_slow.py::test_funcslow1</span></span>
<span class="line"><span style="color:#FFCB6B;">0.10s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">call</span><span style="color:#A6ACCD;">     </span><span style="color:#C3E88D;">test_some_are_slow.py::test_funcfast</span></span>
<span class="line"><span style="color:#A6ACCD;">============================ </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=============================</span></span></code></pre></div><h2 id="incremental-testing-test-steps" tabindex="-1">Incremental testing - test steps <a class="header-anchor" href="#incremental-testing-test-steps" aria-label="Permalink to &quot;Incremental testing - test steps {#incremental-testing-test-steps}&quot;">​</a></h2><p>Sometimes you may have a testing situation which consists of a series of test steps. If one step fails it makes no sense to execute further steps as they are all expected to fail anyway and their tracebacks add no insight. Here is a simple <code>conftest.py</code> file which introduces an <code>incremental</code> marker which is to be used on classes:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> typing </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Dict</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Tuple</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#676E95;font-style:italic;"># store history of failures per test class name and per index in parametrize (if parametrize used)</span></span>
<span class="line"><span style="color:#A6ACCD;">_test_failed_incremental</span><span style="color:#89DDFF;">:</span><span style="color:#A6ACCD;"> Dict</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> Dict</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Tuple</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">int</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> ...</span><span style="color:#89DDFF;">],</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">]]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{}</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_runtest_makereport</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">call</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">incremental</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">keywords</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># incremental marker is used</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> call</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">excinfo</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># the test has failed</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># retrieve the class name of the test</span></span>
<span class="line"><span style="color:#A6ACCD;">            cls_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">cls</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># retrieve the index of the test (if parametrize is used in combination with incremental)</span></span>
<span class="line"><span style="color:#A6ACCD;">            parametrize_index </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">tuple</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">callspec</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">indices</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">values</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hasattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">callspec</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># retrieve the name of the test function</span></span>
<span class="line"><span style="color:#A6ACCD;">            test_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">originalname</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">name</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># store in _test_failed_incremental the original name of the failed test</span></span>
<span class="line"><span style="color:#A6ACCD;">            _test_failed_incremental</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setdefault</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">cls_name</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">{}).</span><span style="color:#82AAFF;">setdefault</span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#82AAFF;">                parametrize_index</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> test_name</span></span>
<span class="line"><span style="color:#82AAFF;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_runtest_setup</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">incremental</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">keywords</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># retrieve the class name of the test</span></span>
<span class="line"><span style="color:#A6ACCD;">        cls_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">cls</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#676E95;font-style:italic;"># check if a previous test has failed for this class</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> cls_name </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> _test_failed_incremental</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># retrieve the index of the test (if parametrize is used in combination with incremental)</span></span>
<span class="line"><span style="color:#A6ACCD;">            parametrize_index </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#FFCB6B;">tuple</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">callspec</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">indices</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">values</span><span style="color:#89DDFF;">())</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">hasattr</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">callspec</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">                </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># retrieve the name of the first test function to fail for this class name and index</span></span>
<span class="line"><span style="color:#A6ACCD;">            test_name </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> _test_failed_incremental</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">cls_name</span><span style="color:#89DDFF;">].</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">parametrize_index</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">None)</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># if name found, test has failed for the combination of class name &amp; test name</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> test_name </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">                pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">xfail</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&quot;previous test failed (</span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">test_name</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">)&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>These two hook implementations work together to abort incremental-marked tests in a class. Here is a test module example:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_step.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">incremental</span></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">TestUserHandling</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_login</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">pass</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_modification</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_deletion</span><span style="color:#89DDFF;">(</span><span style="color:#F07178;font-style:italic;">self</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_normal</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">pass</span></span></code></pre></div><p>If we run this:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-rx</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">4</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_step.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.Fx.</span><span style="color:#A6ACCD;">                                                    [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">____________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TestUserHandling.test_modification</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">____________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">self</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">test_step.TestUserHandling</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xdeadbeef000</span><span style="color:#89DDFF;">1&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_modification</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">self</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_step.py:11:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">XFAIL</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_step.py::TestUserHandling::test_deletion</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">reason:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">previous</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> (test_modification)</span></span>
<span class="line"><span style="color:#A6ACCD;">================== </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xfailed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==================</span></span></code></pre></div><p>We’ll see that <code>test_deletion</code> was not executed because <code>test_modification</code> failed. It is reported as an “expected failure”.</p><h2 id="package-directory-level-fixtures-setups" tabindex="-1">Package/Directory-level fixtures (setups) <a class="header-anchor" href="#package-directory-level-fixtures-setups" aria-label="Permalink to &quot;Package/Directory-level fixtures (setups) {#package-directory-level-fixtures-setups}&quot;">​</a></h2><p>If you have nested test directories, you can have per-directory fixture scopes by placing fixture functions in a <code>conftest.py</code> file in that directory. You can use all types of fixtures including <a href="/python/pytest/how_to_guides/fixture#autouse-fixtures-fixtures-you-don-t-have-to-request">autouse fixtures</a> which are the equivalent of xUnit’s setup/teardown concept. It’s however recommended to have explicit fixture references in your tests or test classes rather than relying on implicitly executing setup/teardown functions, especially if they are far away from the actual tests.</p><p>Here is an example for making a <code>db</code> fixture available in a directory:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of a/conftest.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">class</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">DB</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fixture</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">scope</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">package</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">db</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">DB</span><span style="color:#89DDFF;">()</span></span></code></pre></div><p>and then a test module in that directory:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of a/test_db.py</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_a1</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">db</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> db  </span><span style="color:#676E95;font-style:italic;"># to show value</span></span></code></pre></div><p>another test module:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of a/test_db2.py</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_a2</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">db</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> db  </span><span style="color:#676E95;font-style:italic;"># to show value</span></span></code></pre></div><p>and then a module in a sister directory which will not see the db fixture:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of b/test_error.py</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_root</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">db</span><span style="color:#89DDFF;">):</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># no db here, will error out</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">pass</span></span></code></pre></div><p>We can run this:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">7</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_step.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">.Fx.</span><span style="color:#A6ACCD;">                                                    [ </span><span style="color:#F78C6C;">57</span><span style="color:#C3E88D;">%]</span></span>
<span class="line"><span style="color:#FFCB6B;">a/test_db.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">F</span><span style="color:#A6ACCD;">                                                       [ </span><span style="color:#F78C6C;">71</span><span style="color:#C3E88D;">%]</span></span>
<span class="line"><span style="color:#FFCB6B;">a/test_db2.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">F</span><span style="color:#A6ACCD;">                                                      [ </span><span style="color:#F78C6C;">85</span><span style="color:#C3E88D;">%]</span></span>
<span class="line"><span style="color:#FFCB6B;">b/test_error.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">E</span><span style="color:#A6ACCD;">                                                    [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">================================== </span><span style="color:#C3E88D;">ERRORS</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==================================</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERROR</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">setup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_root</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">________________________</span></span>
<span class="line"><span style="color:#FFCB6B;">file</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project/b/test_error.py,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">line</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_root</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">db</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span><span style="color:#A6ACCD;">  </span><span style="color:#676E95;font-style:italic;"># no db here, will error out</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">fixture</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">db</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">found</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       available fixtures: cache, capfd, capfdbinary, caplog, capsys, capsysbinary, doctest_namespace, monkeypatch, pytestconfig, record_property, record_testsuite_property, record_xml_attribute, recwarn, tmp_path, tmp_path_factory, tmpdir, tmpdir_factory</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       use </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">pytest --fixtures [testpath]</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> help on them.</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">/home/sweet/project/b/test_error.py:1</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">____________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">TestUserHandling.test_modification</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">____________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">self</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">test_step.TestUserHandling</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xdeadbeef000</span><span style="color:#89DDFF;">2&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_modification</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">self</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_step.py:11:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#FFCB6B;">_________________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_a1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">__________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">db</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">conftest.DB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xdeadbeef000</span><span style="color:#89DDFF;">3&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_a1</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">db</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0, db  </span><span style="color:#676E95;font-style:italic;"># to show value</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">AssertionError:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">conftest.DB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xdeadbeef000</span><span style="color:#89DDFF;">3&gt;</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">a/test_db.py:2:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#FFCB6B;">_________________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_a2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">__________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">db</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">conftest.DB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xdeadbeef000</span><span style="color:#89DDFF;">3&gt;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_a2</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">db</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0, db  </span><span style="color:#676E95;font-style:italic;"># to show value</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">AssertionError:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">conftest.DB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0xdeadbeef000</span><span style="color:#89DDFF;">3&gt;</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">a/test_db2.py:2:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_step.py::TestUserHandling::test_modification</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a/test_db.py::test_a1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">conftest.DB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0x7</span><span style="color:#C3E88D;">...</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a/test_db2.py::test_a2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError:</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&lt;</span><span style="color:#C3E88D;">conftest.DB</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">object</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span><span style="color:#C3E88D;">x...</span></span>
<span class="line"><span style="color:#FFCB6B;">ERROR</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">b/test_error.py::test_root</span></span>
<span class="line"><span style="color:#A6ACCD;">============= </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">xfailed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">error</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==============</span></span></code></pre></div><p>The two test modules in the <code>a</code> directory see the same <code>db</code> fixture instance while the one test in the sister-directory <code>b</code> doesn’t see it. We could of course also define a <code>db</code> fixture in that sister directory’s <code>conftest.py</code> file. Note that each fixture is only instantiated if there is a test actually needing it (unless you use “autouse” fixture which are always executed ahead of the first test executing).</p><h2 id="post-process-test-reports-failures" tabindex="-1">Post-process test reports / failures <a class="header-anchor" href="#post-process-test-reports-failures" aria-label="Permalink to &quot;Post-process test reports / failures {#post-process-test-reports-failures}&quot;">​</a></h2><p>If you want to postprocess test reports and need access to the executing environment you can implement a hook that gets called when the test “report” object is about to be created. Here we write out all failing test calls and also access a fixture (if it was used by the test) in case you want to query/look at it during your post processing. In our case we just write some information out to a <code>failures</code> file:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hookimpl</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">wrapper</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">tryfirst</span><span style="color:#89DDFF;">=True)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_runtest_makereport</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">call</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># execute all other hooks to obtain the report object</span></span>
<span class="line"><span style="color:#A6ACCD;">    rep </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">yield</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># we only look at actual failing test calls, not setup/teardown</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> rep</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">when</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">call</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> rep</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">failed</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        mode </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">a</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> os</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">path</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exists</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">failures</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">w</span><span style="color:#89DDFF;">&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">with</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">open</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">failures</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> mode</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">encoding</span><span style="color:#89DDFF;">=</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">utf-8</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">as</span><span style="color:#A6ACCD;"> f</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#676E95;font-style:italic;"># let&#39;s also access a fixture for the fun of it</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tmp_path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">fixturenames</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                extra </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;"> (</span><span style="color:#F78C6C;">{}</span><span style="color:#C3E88D;">)</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">format</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">funcargs</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">tmp_path</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">])</span></span>
<span class="line"><span style="color:#A6ACCD;">            </span><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">                extra </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;&quot;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">            f</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">write</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">rep</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nodeid</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> extra </span><span style="color:#89DDFF;">+</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;">\n</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> rep</span></span></code></pre></div><p>if you then have failing tests:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_module.py</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_fail1</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">tmp_path</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_fail2</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span></code></pre></div><p>and run them:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">FF</span><span style="color:#A6ACCD;">                                                    [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">________________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_fail1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">tmp_path</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">PosixPath</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&#39;PYTEST_TMPDIR/test_fail10&#39;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_fail1</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">tmp_path</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py:2:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#FFCB6B;">________________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_fail2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_fail2</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py:6:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py::test_fail1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py::test_fail2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">============================ </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=============================</span></span></code></pre></div><p>you will have a “failures” file which contains the failing test ids:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cat</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failures</span></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py::test_fail1</span><span style="color:#A6ACCD;"> (PYTEST_TMPDIR/test_fail10)</span></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py::test_fail2</span></span></code></pre></div><h2 id="making-test-result-information-available-in-fixtures" tabindex="-1">Making test result information available in fixtures <a class="header-anchor" href="#making-test-result-information-available-in-fixtures" aria-label="Permalink to &quot;Making test result information available in fixtures {#making-test-result-information-available-in-fixtures}&quot;">​</a></h2><p>If you want to make test result reports available in fixture finalizers here is a little example implemented via a local plugin:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of conftest.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> typing </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> Dict</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">from</span><span style="color:#A6ACCD;"> pytest </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> StashKey</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> CollectReport</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">phase_report_key </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> StashKey</span><span style="color:#89DDFF;">[</span><span style="color:#A6ACCD;">Dict</span><span style="color:#89DDFF;">[</span><span style="color:#FFCB6B;">str</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> CollectReport</span><span style="color:#89DDFF;">]]()</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">hookimpl</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">wrapper</span><span style="color:#89DDFF;">=True,</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">tryfirst</span><span style="color:#89DDFF;">=True)</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">pytest_runtest_makereport</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">item</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">call</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># execute all other hooks to obtain the report object</span></span>
<span class="line"><span style="color:#A6ACCD;">    rep </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;font-style:italic;">yield</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># store test results for each phase of a call, which can</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># be &quot;setup&quot;, &quot;call&quot;, &quot;teardown&quot;</span></span>
<span class="line"><span style="color:#A6ACCD;">    item</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">stash</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">setdefault</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">phase_report_key</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">{})[</span><span style="color:#A6ACCD;">rep</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">when</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> rep</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> rep</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fixture</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">something</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">yield</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># request.node is an &quot;item&quot; because we use the default</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># &quot;function&quot; scope</span></span>
<span class="line"><span style="color:#A6ACCD;">    report </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">node</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">stash</span><span style="color:#89DDFF;">[</span><span style="color:#F07178;">phase_report_key</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> report</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">setup</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">].</span><span style="color:#F07178;">failed</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">setting up a test failed or skipped</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">node</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nodeid</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">elif</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">call</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">not</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> report</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">or</span><span style="color:#A6ACCD;"> report</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">call</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">].</span><span style="color:#F07178;">failed</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">executing test failed or skipped</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">node</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">nodeid</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>if you then have failing tests:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_module.py</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fixture</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">other</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_setup_fails</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">something</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#A6ACCD;font-style:italic;">other</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">pass</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_call_fails</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">something</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_fail2</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span></code></pre></div><p>and run it:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Esetting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">up</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">a</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">skipped</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py::test_setup_fails</span></span>
<span class="line"><span style="color:#FFCB6B;">Fexecuting</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">or</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">skipped</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py::test_call_fails</span></span>
<span class="line"><span style="color:#FFCB6B;">F</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">================================== </span><span style="color:#C3E88D;">ERRORS</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==================================</span></span>
<span class="line"><span style="color:#FFCB6B;">____________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ERROR</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">at</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">setup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">of</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_setup_fails</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">____________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">@pytest.fixture</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">other</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py:7:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">_____________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_call_fails</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">something</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">None</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_call_fails</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">something</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py:15:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#FFCB6B;">________________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_fail2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">________________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_fail2</span><span style="color:#89DDFF;">()</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert 0</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_module.py:19:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py::test_call_fails</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py::test_fail2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#FFCB6B;">ERROR</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_module.py::test_setup_fails</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0</span></span>
<span class="line"><span style="color:#A6ACCD;">======================== </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">error</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">========================</span></span></code></pre></div><p>You’ll see that the fixture finalizers could use the precise reporting information.</p><h2 id="pytest-current-test-environment-variable" tabindex="-1"><code>PYTEST_CURRENT_TEST</code> environment variable <a class="header-anchor" href="#pytest-current-test-environment-variable" aria-label="Permalink to &quot;`PYTEST_CURRENT_TEST` environment variable {#pytest-current-test-environment-variable}&quot;">​</a></h2><p>Sometimes a test session might get stuck and there might be no easy way to figure out which test got stuck, for example if pytest was run in quiet mode (<code>-q</code>) or you don’t have access to the console output. This is particularly a problem if the problem happens only sporadically, the famous “flaky” kind of tests.</p><p><code>pytest</code> sets the <code>PYTEST_CURRENT_TEST</code> environment variable when running tests, which can be inspected by process monitoring utilities or libraries like psutil to discover which test got stuck if necessary:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> psutil</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">for</span><span style="color:#A6ACCD;"> pid </span><span style="color:#89DDFF;font-style:italic;">in</span><span style="color:#A6ACCD;"> psutil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">pids</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    environ </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> psutil</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">Process</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">pid</span><span style="color:#89DDFF;">).</span><span style="color:#82AAFF;">environ</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">PYTEST_CURRENT_TEST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> environ</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#C792EA;">f</span><span style="color:#C3E88D;">&#39;pytest process </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">pid</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;"> running: </span><span style="color:#F78C6C;">{</span><span style="color:#82AAFF;">environ</span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">PYTEST_CURRENT_TEST</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">]</span><span style="color:#F78C6C;">}</span><span style="color:#C3E88D;">&#39;</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>During the test session pytest will set <code>PYTEST_CURRENT_TEST</code> to the current test nodeid and the current stage, which can be <code>setup</code>, <code>call</code>, or <code>teardown</code>.</p><p>For example, when running a single test function named <code>test_foo</code> from <code>foo_module.py</code>, <code>PYTEST_CURRENT_TEST</code> will be set to:</p><ol><li><p><code>foo_module.py::test_foo (setup)</code></p></li><li><p><code>foo_module.py::test_foo (call)</code></p></li><li><p><code>foo_module.py::test_foo (teardown)</code></p></li></ol><p>In that order.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>The contents of <code>PYTEST_CURRENT_TEST</code> is meant to be human readable and the actual format can be changed between releases (even bug fixes) so it shouldn’t be relied on for scripting or automation.</p></div><h2 id="freezing-pytest" tabindex="-1">Freezing pytest <a class="header-anchor" href="#freezing-pytest" aria-label="Permalink to &quot;Freezing pytest {#freezing-pytest}&quot;">​</a></h2><p>If you freeze your application using a tool like <a href="https://pyinstaller.readthedocs.io/" target="_blank" rel="noreferrer">PyInstaller</a> in order to distribute it to your end-users, it is a good idea to also package your test runner and run your tests using the frozen application. This way packaging errors such as dependencies not being included into the executable can be detected early while also allowing you to send test files to users so they can run them in their machines, which can be useful to obtain more information about a hard to reproduce bug.</p><p>Fortunately recent <code>PyInstaller</code> releases already have a custom hook for pytest, but if you are using another tool to freeze executables such as <code>cx_freeze</code> or <code>py2exe</code>, you can use <code>pytest.freeze_includes()</code> to obtain the full list of internal pytest modules. How to configure the tools to find the internal modules varies from tool to tool, however.</p><p>Instead of freezing the pytest runner as a separate executable, you can make your frozen program work as the pytest runner by some clever argument handling during program startup. This allows you to have a single executable, which is usually more convenient. Please note that the mechanism for plugin discovery used by pytest (setuptools entry points) doesn’t work with frozen executables so pytest can’t find any third party plugins automatically. To include third party plugins like <code>pytest-timeout</code> they must be imported explicitly and passed on to pytest.main.</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># contents of app_main.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> sys</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest_timeout  </span><span style="color:#676E95;font-style:italic;"># Third party plugin</span></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">len</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">argv</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">and</span><span style="color:#A6ACCD;"> sys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">argv</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">1</span><span style="color:#89DDFF;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">--pytest</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    sys</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">exit</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">main</span><span style="color:#89DDFF;">(</span><span style="color:#82AAFF;">sys</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">argv</span><span style="color:#89DDFF;">[</span><span style="color:#F78C6C;">2</span><span style="color:#89DDFF;">:],</span><span style="color:#82AAFF;"> </span><span style="color:#A6ACCD;font-style:italic;">plugins</span><span style="color:#89DDFF;">=[</span><span style="color:#82AAFF;">pytest_timeout</span><span style="color:#89DDFF;">]))</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">else</span><span style="color:#89DDFF;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># normal application execution: at this point argv can be parsed</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># by your argument-parsing library of choice as usual</span></span>
<span class="line"><span style="color:#A6ACCD;">    ...</span></span></code></pre></div><p>This allows you to execute tests using the frozen application with standard <code>pytest</code> command-line options:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">./app_main</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--verbose</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--tb=long</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--junitxml=results.xml</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test-suite/</span></span></code></pre></div></div></div></main><footer class="VPDocFooter" data-v-3b678f29 data-v-ded06239><!--[--><!--]--><div class="edit-info" data-v-ded06239><div class="edit-link" data-v-ded06239><a class="VPLink link vp-external-link-icon no-icon edit-link-button" href="https://github.com/huohuoren4/docs/tree/main/python/pytest/further_topics/example_trick/basic_pattern.md" target="_blank" rel="noreferrer" data-v-ded06239><!--[--><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="edit-link-icon" aria-label="edit icon" data-v-ded06239><path d="M18,23H4c-1.7,0-3-1.3-3-3V6c0-1.7,1.3-3,3-3h7c0.6,0,1,0.4,1,1s-0.4,1-1,1H4C3.4,5,3,5.4,3,6v14c0,0.6,0.4,1,1,1h14c0.6,0,1-0.4,1-1v-7c0-0.6,0.4-1,1-1s1,0.4,1,1v7C21,21.7,19.7,23,18,23z"></path><path d="M8,17c-0.3,0-0.5-0.1-0.7-0.3C7,16.5,6.9,16.1,7,15.8l1-4c0-0.2,0.1-0.3,0.3-0.5l9.5-9.5c1.2-1.2,3.2-1.2,4.4,0c1.2,1.2,1.2,3.2,0,4.4l-9.5,9.5c-0.1,0.1-0.3,0.2-0.5,0.3l-4,1C8.2,17,8.1,17,8,17zM9.9,12.5l-0.5,2.1l2.1-0.5l9.3-9.3c0.4-0.4,0.4-1.1,0-1.6c-0.4-0.4-1.2-0.4-1.6,0l0,0L9.9,12.5z M18.5,2.5L18.5,2.5L18.5,2.5z"></path></svg> Edit this page on GitHub<!--]--></a></div><div class="last-updated" data-v-ded06239><p class="VPLastUpdated" data-v-ded06239 data-v-5bd7d0c8>Last updated: <time datetime="2023-08-23T16:21:58.000Z" data-v-5bd7d0c8></time></p></div></div><nav class="prev-next" data-v-ded06239><div class="pager" data-v-ded06239><a class="pager-link prev" href="/python/pytest/further_topics/example_trick/failure_report" data-v-ded06239><span class="desc" data-v-ded06239>Previous page</span><span class="title" data-v-ded06239>Demo of Python failure reports with pytest</span></a></div><div class="pager" data-v-ded06239><a class="pager-link next" href="/python/pytest/further_topics/example_trick/parametrize" data-v-ded06239><span class="desc" data-v-ded06239>Next page</span><span class="title" data-v-ded06239>Parametrizing tests</span></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-f793074e data-v-42f13e82><div class="container" data-v-42f13e82><p class="message" data-v-42f13e82>Released under the MIT License.</p><p class="copyright" data-v-42f13e82>Copyright © 2023-present G-Tester</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"python_allure_report.md\":\"39ca5c96\",\"readme.md\":\"346cc5ab\",\"python_flask_additional_note_flask_extension.md\":\"36ad78a4\",\"index.md\":\"346c6212\",\"python_flask_api_reference_view_function.md\":\"b4ad0a9c\",\"python_allure_get_start.md\":\"dab27ad6\",\"python_allure_language.md\":\"9d6172a0\",\"python_flask_api_reference_test_cli.md\":\"3cb4bede\",\"python_flask_additional_note_license.md\":\"7d961662\",\"python_flask_api_reference_session.md\":\"bd3d33cc\",\"python_flask_api_reference_view.md\":\"8ac338dc\",\"python_flask_api_reference_test_client.md\":\"421d4d67\",\"python_flask_api_reference_template_render.md\":\"3efc744d\",\"python_flask_api_reference_message_flash.md\":\"5e043eb8\",\"python_flask_user_guide_pattern_subclass_flask.md\":\"1207f1be\",\"python_flask_additional_note_contribute.md\":\"8f929b64\",\"python_flask_user_guide_blueprint.md\":\"6f06c79e\",\"python_flask_home.md\":\"b6dbee31\",\"python_flask_user_guide_debug_error.md\":\"b134bd2f\",\"python_flask_api_reference_useful_internal.md\":\"949cb59d\",\"python_flask_additional_note_design_decision.md\":\"a612a6d9\",\"python_flask_api_reference_stream_help.md\":\"a61777ba\",\"plan.md\":\"9c0bdbad\",\"python_flask_api_reference_signal.md\":\"5a029e30\",\"python_flask_user_guide_pattern_add_http.md\":\"556247a0\",\"python_flask_user_guide_app_context.md\":\"426ef39f\",\"python_pytest_further_topics_announcement.md\":\"71c6b1f9\",\"python_flask_api_reference_cmd_line.md\":\"516b3ac3\",\"python_flask_api_reference_blueprint_obj.md\":\"5d6f58c0\",\"python_flask_user_guide_tutorial_blog_blueprint.md\":\"e413ff29\",\"python_flask_api_reference_config.md\":\"f60b9338\",\"python_flask_user_guide_tutorial_database.md\":\"1aa43bb1\",\"python_flask_api_reference_json_support.md\":\"024790f8\",\"python_flask_user_guide_application.md\":\"7fd1e759\",\"python_flask_user_guide_tutorial_deploy.md\":\"244e3a1e\",\"python_flask_user_guide_deploy.md\":\"b3d729af\",\"python_flask_user_guide_tutorial_develop.md\":\"918b2754\",\"python_flask_api_reference_app_global.md\":\"10207968\",\"python_flask_user_guide_pattern_upload_file.md\":\"d08b51dc\",\"python_pytest_explanation_anatomy.md\":\"3b667b4b\",\"python_flask_api_reference_app_obj.md\":\"cf0a9f78\",\"python_pytest_explanation_integration_practice.md\":\"09605d5d\",\"python_pytest_further_topics_example_trick_test_discovery.md\":\"8932fbb6\",\"python_flask_user_guide_pattern_single_page.md\":\"b3e83d80\",\"python_flask_user_guide_tutorial_template.md\":\"e1f28795\",\"python_pytest_how_to_guides_output.md\":\"bfc6a3fb\",\"python_flask_api_reference_url_route.md\":\"993061f6\",\"python_flask_user_guide_signal.md\":\"44a208d2\",\"python_pytest_further_topics_example_trick_content.md\":\"643a28bd\",\"python_pytest_how_to_guides_bash_completion.md\":\"7fa4baa2\",\"python_flask_user_guide_pattern_template_inheritance.md\":\"0518d61e\",\"python_pytest_how_to_guides_logging.md\":\"0670e61e\",\"python_flask_user_guide_pattern_celery.md\":\"d07773c8\",\"python_pytest_further_topics_contribution.md\":\"d1b66c2f\",\"python_flask_user_guide_tutorial_blueprint_view.md\":\"70a76636\",\"python_flask_api_reference_response_obj.md\":\"a70d8a86\",\"python_pytest_how_to_guides_invoke_pytest.md\":\"d24ff90a\",\"python_pytest_explanation_flaky_test.md\":\"ba123ab8\",\"python_flask_user_guide_tutorial_introduction.md\":\"505495ad\",\"python_flask_api_reference_request_data.md\":\"76972134\",\"python_flask_user_guide_pattern_mongdb.md\":\"be7bd573\",\"python_pytest_reference_guides_api_reference_warnings.md\":\"7a76c1e3\",\"python_flask_user_guide_template.md\":\"05a3e9d9\",\"python_flask_user_guide_pattern.md\":\"5b84180e\",\"python_pytest_how_to_guides_use_plugin.md\":\"383c7488\",\"python_pytest_further_topics_talk_tutorial.md\":\"e7ffb293\",\"python_pytest_explanation_import_mechanism.md\":\"7e96950b\",\"python_flask_user_guide_pattern_flash.md\":\"ab7cb807\",\"python_flask_user_guide_pattern_index.md\":\"70d629e4\",\"python_flask_api_reference_session_interface.md\":\"a46aed9e\",\"python_pytest_reference_guides_api_reference_hooks.md\":\"438ba574\",\"python_flask_user_guide_security.md\":\"45df9ee1\",\"python_pytest_how_to_guides_hook_func.md\":\"90d4e9c3\",\"python_flask_user_guide_pattern_app_dispatch.md\":\"afafa118\",\"python_flask_user_guide_tutorial_static_file.md\":\"286110ad\",\"python_pytest_reference_guides_api_reference_constants.md\":\"a90f3bad\",\"python_pytest_explanation_about_fixture.md\":\"ef9a8c1e\",\"python_flask_user_guide_async.md\":\"167d5280\",\"python_pytest_reference_guides_api_reference_marks.md\":\"9c40eb2b\",\"python_pytest_reference_guides_api_reference_exceptions.md\":\"d984f80a\",\"python_flask_user_guide_extension.md\":\"0948354e\",\"python_flask_user_guide_tutorial_app_setup.md\":\"0f8f334c\",\"python_flask_user_guide_pattern_load_view.md\":\"099ad3a3\",\"python_pytest_how_to_guides_unittest.md\":\"862c622d\",\"python_pytest_reference_guides_plugin_list.md\":\"2d97bb43\",\"python_pytest_how_to_guides_params_fixture.md\":\"9c7aa31f\",\"python_flask_user_guide_logging.md\":\"ff7b052c\",\"python_flask_user_guide_tutorial_project_layout.md\":\"009821ee\",\"python_pytest_how_to_guides_test_suite.md\":\"b0c62d7e\",\"python_flask_user_guide_install.md\":\"f8993b78\",\"python_pytest_further_topics_contact.md\":\"3956fde2\",\"python_flask_api_reference_function_class.md\":\"8311aa60\",\"python_pytest_further_topics_compatibility.md\":\"20ea4094\",\"python_flask_user_guide_pattern_favicon.md\":\"1b21c032\",\"python_pytest_how_to_guides_mark.md\":\"b2f76fad\",\"python_pytest_how_to_guides_nose_test.md\":\"51abec39\",\"python_pytest_reference_guides_api_reference_objects.md\":\"dce8e989\",\"python_flask_user_guide_request_context.md\":\"cf0d5880\",\"python_flask_user_guide_pattern_checksum.md\":\"d0c20664\",\"python_pytest_further_topics_license.md\":\"a9233822\",\"python_flask_user_guide_pattern_caching.md\":\"1d6ce5ef\",\"python_pytest_reference_guides_api_reference_functions.md\":\"5bd241f9\",\"python_flask_user_guide_pattern_app_factories.md\":\"7e78d0e1\",\"python_flask_user_guide_app_structure.md\":\"cd8277d8\",\"python_flask_user_guide_shell.md\":\"ed4b20c9\",\"python_flask_user_guide_quickstart.md\":\"319153a1\",\"python_pytest_further_topics_history.md\":\"08c2bcd1\",\"python_flask_user_guide_tutorial_project_install.md\":\"73773974\",\"python_flask_user_guide_pattern_use_url.md\":\"4565e92a\",\"python_flask_user_guide_pattern_sqlalchemy.md\":\"5419d077\",\"python_pytest_further_topics_development_guide.md\":\"70451a6e\",\"python_flask_user_guide_handle_error.md\":\"528af4ed\",\"python_pytest_reference_guides_api_reference_env_variables.md\":\"fb84d4ea\",\"python_flask_user_guide_configuration.md\":\"16a5a4aa\",\"python_flask_additional_note_change.md\":\"22d9f606\",\"python_flask_user_guide_pattern_sqlite3.md\":\"c7354373\",\"python_pytest_how_to_guides_xunit.md\":\"364800d4\",\"python_pytest_further_topics_example_trick_work.md\":\"fc6c1559\",\"python_flask_user_guide_pattern_stream_content.md\":\"5da0ec35\",\"python_flask_user_guide_pattern_request_callback.md\":\"60f73fa7\",\"python_pytest_how_to_guides_assert.md\":\"4ce377c5\",\"python_pytest_further_topics_enterprise.md\":\"7c724bd8\",\"python_pytest_how_to_guides_doctest.md\":\"825c23c7\",\"python_pytest_how_to_guides_temp.md\":\"7c41ef06\",\"python_flask_user_guide_pattern_view_decorator.md\":\"c6d8bb3a\",\"python_flask_user_guide_view.md\":\"25ad8f34\",\"python_pytest_get_started.md\":\"73c73708\",\"python_pytest_home.md\":\"98ce15da\",\"python_flask_user_guide_cmd_interface.md\":\"4aba92b1\",\"python_flask_user_guide_pattern_wtform.md\":\"b33938e9\",\"python_pytest_reference_guides_api_reference_config_options.md\":\"3ada9a19\",\"python_pytest_further_topics_example_trick_custom_mark.md\":\"0cfe8b6e\",\"python_pytest_reference_guides_api_reference_fixtures.md\":\"141bb869\",\"python_pytest_further_topics_example_trick_session_fixture.md\":\"0f066153\",\"python_pytest_further_topics_historical_note.md\":\"b39096df\",\"python_pytest_further_topics_sponsor.md\":\"75508e71\",\"python_flask_user_guide_pattern_large_app.md\":\"5098154b\",\"python_pytest_reference_guides_api_reference_global_variables.md\":\"bbb7d36a\",\"python_pytest_how_to_guides_write_plugin.md\":\"8f65320b\",\"python_flask_user_guide_develop_server.md\":\"bacb5f81\",\"python_pytest_how_to_guides_mock.md\":\"958c3329\",\"python_pytest_reference_guides_configuration.md\":\"699d969e\",\"python_pytest_reference_guides_api_reference_collection.md\":\"604aa9e1\",\"python_pytest_how_to_guides_skip_xfail.md\":\"69d5f302\",\"python_pytest_how_to_guides_warning.md\":\"2bbbb396\",\"python_flask_user_guide_pattern_javascript.md\":\"993f5448\",\"python_pytest_how_to_guides_re_run.md\":\"63cf1027\",\"python_pytest_reference_guides_api_reference_cmd_flags.md\":\"a48e789c\",\"python_pytest_further_topics_example_trick_failure_report.md\":\"69994ffd\",\"python_pytest_further_topics_example_trick_parametrize.md\":\"ef90749b\",\"python_pytest_other_builtin.md\":\"8a166f3a\",\"python_flask_user_guide_tutorial_test_coverage.md\":\"add02f13\",\"python_pytest_further_topics_deprecation.md\":\"4775b457\",\"python_pytest_reference_guides_fixture_reference.md\":\"7ed73889\",\"python_pytest_further_topics_example_trick_basic_pattern.md\":\"e8bbbb18\",\"python_pytest_how_to_guides_fixture.md\":\"1908b19a\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en\",\"dir\":\"ltr\",\"title\":\"G-Tester\",\"description\":\"Make Testing Automated And Intelligent\",\"base\":\"/\",\"head\":[],\"appearance\":true,\"themeConfig\":{\"logo\":\"/favicon.ico\",\"editLink\":{\"pattern\":\"https://github.com/huohuoren4/docs/tree/main/:path\",\"text\":\"Edit this page on GitHub\"},\"nav\":[{\"text\":\"Notice 📢\",\"items\":[{\"text\":\"Plan 🟡\",\"link\":\"/plan\"},{\"text\":\"Message 🔔\",\"link\":\"...\"}]},{\"text\":\"Python\",\"items\":[{\"text\":\"doc\",\"link\":\"https://docs.python.org/3.7/\"},{\"text\":\"Test Automatic\",\"items\":[{\"text\":\"pytest 🟢\",\"link\":\"/python/pytest/home\",\"activeMatch\":\"/python/pytest\"},{\"text\":\"allure 🟡\",\"link\":\"/python/allure/get_start\",\"activeMatch\":\"/python/allure\"},{\"text\":\"pluggy\",\"link\":\"https://pluggy.readthedocs.io/en/\"},{\"text\":\"pytest-xdist\",\"link\":\"https://pytest-xdist.readthedocs.io/en/\"},{\"text\":\"selenium\",\"link\":\"https://www.selenium.dev/documentation/\"},{\"text\":\"requests\",\"link\":\"https://requests.readthedocs.io/\"},{\"text\":\"paramiko\",\"link\":\"https://requests.readthedocs.io/\"}]},{\"text\":\"Test Intelligence\",\"items\":[{\"text\":\"pytorch\",\"link\":\"https://pytorch.org/tutorials/\"}]},{\"text\":\"Awesome Flask\",\"items\":[{\"text\":\"flask 🟡\",\"link\":\"/python/flask/home\",\"activeMatch\":\"/python/flask/\"},{\"text\":\"click\",\"link\":\"https://click.palletsprojects.com/en/\"},{\"text\":\"werkzeug\",\"link\":\"https://werkzeug.palletsprojects.com/en/\"},{\"text\":\"flask-restful\",\"link\":\"https://flask-restful.readthedocs.io/en/\"},{\"text\":\"flask-admin\",\"link\":\"https://flask-admin.readthedocs.io/en/\"},{\"text\":\"celery\",\"link\":\"https://docs.celeryq.dev/en/stable/\"}]}]},{\"text\":\"Golang\",\"items\":[{\"text\":\"doc\",\"link\":\"https://golang.google.cn/doc/\"},{\"text\":\"Web Framework\",\"items\":[{\"text\":\"gin\",\"link\":\"https://gin-gonic.com/docs/\"}]}]},{\"text\":\"Vue\",\"items\":[{\"text\":\"doc\",\"link\":\"https://vuejs.org/\"},{\"text\":\"Awesome Vue\",\"items\":[{\"text\":\"vite\",\"link\":\"https://vitejs.dev/\"},{\"text\":\"vitepress\",\"link\":\"https://vitepress.dev/\"},{\"text\":\"element plus\",\"link\":\"https://element-plus.org/en-US/\"}]}]},{\"text\":\"Resources\",\"items\":[{\"text\":\"Team\",\"link\":\"...\"},{\"text\":\"Releases\",\"link\":\"...\"},{\"text\":\"Contribution\",\"link\":\"...\"},{\"text\":\"Help Us Translate😄\",\"link\":\"https://github.com/huohuoren4/docs.git\"}]}],\"outline\":{\"level\":\"deep\"},\"footer\":{\"message\":\"Released under the MIT License.\",\"copyright\":\"Copyright © 2023-present G-Tester\"},\"sidebar\":{\"/python/pytest/\":[{\"text\":\"Pytest v7.4.0\",\"items\":[{\"text\":\"Home\",\"link\":\"/python/pytest/home\"},{\"text\":\"Get Started\",\"link\":\"/python/pytest/get_started\"},{\"text\":\"How-to guides\",\"collapsed\":true,\"items\":[{\"text\":\"How to invoke pytest\",\"link\":\"/python/pytest/how_to_guides/invoke_pytest\"},{\"text\":\"How to write and report assertions in tests\",\"link\":\"/python/pytest/how_to_guides/assert\"},{\"text\":\"How to use fixtures\",\"link\":\"/python/pytest/how_to_guides/fixture\"},{\"text\":\"How to mark test functions with attributes\",\"link\":\"/python/pytest/how_to_guides/mark\"},{\"text\":\"How to parametrize fixtures and test functions\",\"link\":\"/python/pytest/how_to_guides/params_fixture\"},{\"text\":\"How to use temporary directories and files in tests\",\"link\":\"/python/pytest/how_to_guides/temp\"},{\"text\":\"How to monkeypatch/mock modules and environments\",\"link\":\"/python/pytest/how_to_guides/mock\"},{\"text\":\"How to run doctests\",\"link\":\"/python/pytest/how_to_guides/doctest\"},{\"text\":\"How to re-run failed tests and maintain state between test runs\",\"link\":\"/python/pytest/how_to_guides/re_run\"},{\"text\":\"How to manage logging\",\"link\":\"/python/pytest/how_to_guides/logging\"},{\"text\":\"How to capture stdout/stderr output\",\"link\":\"/python/pytest/how_to_guides/output\"},{\"text\":\"How to capture warnings\",\"link\":\"/python/pytest/how_to_guides/warning\"},{\"text\":\"How to use skip and xfail to deal with tests that cannot succeed\",\"link\":\"/python/pytest/how_to_guides/skip_xfail\"},{\"text\":\"How to install and use plugins\",\"link\":\"/python/pytest/how_to_guides/use_plugin\"},{\"text\":\"Writing plugins\",\"link\":\"/python/pytest/how_to_guides/write_plugin\"},{\"text\":\"Writing hook functions\",\"link\":\"/python/pytest/how_to_guides/hook_func\"},{\"text\":\"How to use pytest with an existing test suite\",\"link\":\"/python/pytest/how_to_guides/test_suite\"},{\"text\":\"How to use unittest-based tests with pytest\",\"link\":\"/python/pytest/how_to_guides/unittest\"},{\"text\":\"How to run tests written for nose\",\"link\":\"/python/pytest/how_to_guides/nose_test\"},{\"text\":\"How to implement xunit-style set-up\",\"link\":\"/python/pytest/how_to_guides/xunit\"},{\"text\":\"How to set up bash completion\",\"link\":\"/python/pytest/how_to_guides/bash_completion\"}]},{\"text\":\"Reference guides\",\"collapsed\":true,\"items\":[{\"text\":\"Fixtures reference\",\"link\":\"/python/pytest/reference_guides/fixture_reference\"},{\"text\":\"Plugin List\",\"link\":\"/python/pytest/reference_guides/plugin_list\"},{\"text\":\"Configuration\",\"link\":\"/python/pytest/reference_guides/configuration\"},{\"text\":\"API Reference\",\"collapsed\":true,\"items\":[{\"text\":\"Constants\",\"link\":\"/python/pytest/reference_guides/api_reference/constants\"},{\"text\":\"Functions\",\"link\":\"/python/pytest/reference_guides/api_reference/functions\"},{\"text\":\"Marks\",\"link\":\"/python/pytest/reference_guides/api_reference/marks\"},{\"text\":\"Fixtures\",\"link\":\"/python/pytest/reference_guides/api_reference/fixtures\"},{\"text\":\"Hooks\",\"link\":\"/python/pytest/reference_guides/api_reference/hooks\"},{\"text\":\"Collection tree objects\",\"link\":\"/python/pytest/reference_guides/api_reference/collection\"},{\"text\":\"Objects\",\"link\":\"/python/pytest/reference_guides/api_reference/objects\"},{\"text\":\"Global Variables\",\"link\":\"/python/pytest/reference_guides/api_reference/global_variables\"},{\"text\":\"Environment Variables\",\"link\":\"/python/pytest/reference_guides/api_reference/env_variables\"},{\"text\":\"Exceptions\",\"link\":\"/python/pytest/reference_guides/api_reference/exceptions\"},{\"text\":\"Warnings\",\"link\":\"/python/pytest/reference_guides/api_reference/warnings\"},{\"text\":\"Configuration Options\",\"link\":\"/python/pytest/reference_guides/api_reference/config_options\"},{\"text\":\"Command-line Flags\",\"link\":\"/python/pytest/reference_guides/api_reference/cmd_flags\"}]}]},{\"text\":\"Explanation\",\"collapsed\":true,\"items\":[{\"text\":\"Anatomy of a test\",\"link\":\"/python/pytest/explanation/anatomy\"},{\"text\":\"About fixtures\",\"link\":\"/python/pytest/explanation/about_fixture\"},{\"text\":\"Good Integration Practices\",\"link\":\"/python/pytest/explanation/integration_practice\"},{\"text\":\"Flaky tests\",\"link\":\"/python/pytest/explanation/flaky_test\"},{\"text\":\"pytest import mechanisms \",\"link\":\"/python/pytest/explanation/import_mechanism\"}]},{\"text\":\"Further topics\",\"collapsed\":true,\"items\":[{\"text\":\"Examples and customization tricks\",\"collapsed\":true,\"items\":[{\"text\":\"Contents\",\"link\":\"/python/pytest/further_topics/example_trick/content\"},{\"text\":\"Demo of Python failure reports with pytest\",\"link\":\"/python/pytest/further_topics/example_trick/failure_report\"},{\"text\":\"Basic patterns and examples\",\"link\":\"/python/pytest/further_topics/example_trick/basic_pattern\"},{\"text\":\"Parametrizing tests\",\"link\":\"/python/pytest/further_topics/example_trick/parametrize\"},{\"text\":\"Working with custom markers\",\"link\":\"/python/pytest/further_topics/example_trick/custom_mark\"},{\"text\":\"A session-fixture which can look at all collected tests\",\"link\":\"/python/pytest/further_topics/example_trick/session_fixture\"},{\"text\":\"Changing standard (Python) test discovery\",\"link\":\"/python/pytest/further_topics/example_trick/test_discovery\"},{\"text\":\"Working with non-python tests\",\"link\":\"/python/pytest/further_topics/example_trick/work\"}]},{\"text\":\"Backwards Compatibility Policy\",\"link\":\"/python/pytest/further_topics/compatibility\"},{\"text\":\"Deprecations and Removals\",\"link\":\"/python/pytest/further_topics/deprecation\"},{\"text\":\"Contribution getting started\",\"link\":\"/python/pytest/further_topics/contribution\"},{\"text\":\"Development Guide\",\"link\":\"/python/pytest/further_topics/development_guide\"},{\"text\":\"Sponsor\",\"link\":\"/python/pytest/further_topics/sponsor\"},{\"text\":\"pytest for enterprise\",\"link\":\"/python/pytest/further_topics/enterprise\"},{\"text\":\"License\",\"link\":\"/python/pytest/further_topics/license\"},{\"text\":\"Contact channels\",\"link\":\"/python/pytest/further_topics/contact\"},{\"text\":\"History\",\"link\":\"/python/pytest/further_topics/history\"},{\"text\":\"Historical Notes\",\"link\":\"/python/pytest/further_topics/historical_note\"},{\"text\":\"Talks and Tutorials\",\"link\":\"/python/pytest/further_topics/talk_tutorial\"},{\"text\":\"Release announcements\",\"link\":\"/python/pytest/further_topics/announcement\"}]}]}],\"/python/allure/\":[{\"text\":\"Allure v2.23.1\",\"items\":[{\"text\":\"Get started\",\"link\":\"/python/allure/get_start\"},{\"text\":\"Language support\",\"link\":\"/python/allure/language\"},{\"text\":\"Report and plugin\",\"link\":\"/python/allure/report\"}]}],\"/python/flask/\":[{\"text\":\"Flask v2.3.2\",\"items\":[{\"text\":\"Home\",\"link\":\"/python/flask/home\"},{\"text\":\"User Guide\",\"collapsed\":true,\"items\":[{\"text\":\"Installation\",\"link\":\"/python/flask/user_guide/install\"},{\"text\":\"Quickstart\",\"link\":\"/python/flask/user_guide/quickstart\"},{\"text\":\"Tutorial\",\"collapsed\":true,\"items\":[{\"text\":\"Introduction\",\"link\":\"/python/flask/user_guide/tutorial/introduction\"},{\"text\":\"Project Layout\",\"link\":\"/python/flask/user_guide/tutorial/project_layout\"},{\"text\":\"Application Setup\",\"link\":\"/python/flask/user_guide/tutorial/app_setup\"},{\"text\":\"Define and Access the Database\",\"link\":\"/python/flask/user_guide/tutorial/database\"},{\"text\":\"Blueprints and Views\",\"link\":\"/python/flask/user_guide/tutorial/blueprint_view\"},{\"text\":\"Templates\",\"link\":\"/python/flask/user_guide/tutorial/template\"},{\"text\":\"Static Files\",\"link\":\"/python/flask/user_guide/tutorial/static_file\"},{\"text\":\"Blog Blueprint\",\"link\":\"/python/flask/user_guide/tutorial/blog_blueprint\"},{\"text\":\"Make the Project Installable\",\"link\":\"/python/flask/user_guide/tutorial/project_install\"},{\"text\":\"Test Coverage\",\"link\":\"/python/flask/user_guide/tutorial/test_coverage\"},{\"text\":\"Deploy to Production\",\"link\":\"/python/flask/user_guide/tutorial/deploy\"},{\"text\":\"Keep Developing\",\"link\":\"/python/flask/user_guide/tutorial/develop\"}]},{\"text\":\"Templates\",\"link\":\"/python/flask/user_guide/template\"},{\"text\":\"Testing Flask Applications\",\"link\":\"/python/flask/user_guide/application\"},{\"text\":\"Handling Application Errors\",\"link\":\"/python/flask/user_guide/handle_error\"},{\"text\":\"Debugging Application Errors\",\"link\":\"/python/flask/user_guide/debug_error\"},{\"text\":\"Logging\",\"link\":\"/python/flask/user_guide/logging\"},{\"text\":\"Configuration Handling\",\"link\":\"/python/flask/user_guide/configuration\"},{\"text\":\"Signals\",\"link\":\"/python/flask/user_guide/signal\"},{\"text\":\"Class-based Views\",\"link\":\"/python/flask/user_guide/view\"},{\"text\":\"Application Structure and Lifecycle\",\"link\":\"/python/flask/user_guide/app_structure\"},{\"text\":\"The Application Context\",\"link\":\"/python/flask/user_guide/app_context\"},{\"text\":\"The Request Context\",\"link\":\"/python/flask/user_guide/request_context\"},{\"text\":\"Modular Applications with Blueprints\",\"link\":\"/python/flask/user_guide/blueprint\"},{\"text\":\"Extensions\",\"link\":\"/python/flask/user_guide/extension\"},{\"text\":\"Command Line Interface\",\"link\":\"/python/flask/user_guide/cmd_interface\"},{\"text\":\"Development Server\",\"link\":\"/python/flask/user_guide/develop_server\"},{\"text\":\"Working with the Shell\",\"link\":\"/python/flask/user_guide/shell\"},{\"text\":\"Patterns for Flask\",\"collapsed\":true,\"items\":[{\"text\":\"Index\",\"link\":\"/python/flask/user_guide/pattern/index.md\"},{\"text\":\"Large Applications as Packages\",\"link\":\"/python/flask/user_guide/pattern/large_app\"},{\"text\":\"Application Factories\",\"link\":\"/python/flask/user_guide/pattern/app_factories\"},{\"text\":\"Application Dispatching\",\"link\":\"/python/flask/user_guide/pattern/app_dispatch\"},{\"text\":\"Using URL Processors\",\"link\":\"/python/flask/user_guide/pattern/use_url\"},{\"text\":\"Using SQLite 3 with Flask\",\"link\":\"/python/flask/user_guide/pattern/sqlite3\"},{\"text\":\"SQLAlchemy in Flask\",\"link\":\"/python/flask/user_guide/pattern/sqlalchemy\"},{\"text\":\"Uploading Files\",\"link\":\"/python/flask/user_guide/pattern/upload_file\"},{\"text\":\"Caching\",\"link\":\"/python/flask/user_guide/pattern/caching\"},{\"text\":\"View Decorators\",\"link\":\"/python/flask/user_guide/pattern/view_decorator\"},{\"text\":\"Form Validation with WTForms\",\"link\":\"/python/flask/user_guide/pattern/wtform\"},{\"text\":\"Template Inheritance\",\"link\":\"/python/flask/user_guide/pattern/template_inheritance\"},{\"text\":\"Message Flashing\",\"link\":\"/python/flask/user_guide/pattern/flash\"},{\"text\":\"JavaScript, fetch, and JSON\",\"link\":\"/python/flask/user_guide/pattern/javascript\"},{\"text\":\"Lazily Loading Views\",\"link\":\"/python/flask/user_guide/pattern/load_view\"},{\"text\":\"MongoDB with MongoEngine\",\"link\":\"/python/flask/user_guide/pattern/mongdb\"},{\"text\":\"Adding a favicon\",\"link\":\"/python/flask/user_guide/pattern/favicon\"},{\"text\":\"Streaming Contents\",\"link\":\"/python/flask/user_guide/pattern/stream_content\"},{\"text\":\"Deferred Request Callbacks\",\"link\":\"/python/flask/user_guide/pattern/request_callback\"},{\"text\":\"Adding HTTP Method Overrides\",\"link\":\"/python/flask/user_guide/pattern/add_http\"},{\"text\":\"Request Content Checksums\",\"link\":\"/python/flask/user_guide/pattern/checksum\"},{\"text\":\"Background Tasks with Celery\",\"link\":\"/python/flask/user_guide/pattern/celery\"},{\"text\":\"Subclassing Flask\",\"link\":\"/python/flask/user_guide/pattern/subclass_flask\"},{\"text\":\"Single-Page Applications\",\"link\":\"/python/flask/user_guide/pattern/single_page\"}]},{\"text\":\"Security Considerations\",\"link\":\"/python/flask/user_guide/security\"},{\"text\":\"Deploying to Production\",\"link\":\"/python/flask/user_guide/deploy\"},{\"text\":\"Using async and await\",\"link\":\"/python/flask/user_guide/async\"}]},{\"text\":\"API Reference\",\"collapsed\":true,\"items\":[{\"text\":\"Application Object\",\"link\":\"/python/flask/api_reference/app_obj\"},{\"text\":\"Blueprint Objects\",\"link\":\"/python/flask/api_reference/blueprint_obj\"},{\"text\":\"Incoming Request Data\",\"link\":\"/python/flask/api_reference/request_data\"},{\"text\":\"Response Objects\",\"link\":\"/python/flask/api_reference/response_obj\"},{\"text\":\"Sessions\",\"link\":\"/python/flask/api_reference/session\"},{\"text\":\"Session Interface\",\"link\":\"/python/flask/api_reference/session_interface\"},{\"text\":\"Test Client\",\"link\":\"/python/flask/api_reference/test_client\"},{\"text\":\"Test CLI Runner\",\"link\":\"/python/flask/api_reference/test_cli\"},{\"text\":\"Application Globals\",\"link\":\"/python/flask/api_reference/app_global\"},{\"text\":\"Useful Functions and Classes\",\"link\":\"/python/flask/api_reference/function_class\"},{\"text\":\"Message Flashing\",\"link\":\"/python/flask/api_reference/message_flash\"},{\"text\":\"JSON Support\",\"link\":\"/python/flask/api_reference/json_support\"},{\"text\":\"Template Rendering\",\"link\":\"/python/flask/api_reference/template_render\"},{\"text\":\"Configuration\",\"link\":\"/python/flask/api_reference/config\"},{\"text\":\"Stream Helpers\",\"link\":\"/python/flask/api_reference/stream_help\"},{\"text\":\"Useful Internals\",\"link\":\"/python/flask/api_reference/useful_internal\"},{\"text\":\"Signals\",\"link\":\"/python/flask/api_reference/signal\"},{\"text\":\"Class-Based Views\",\"link\":\"/python/flask/api_reference/view\"},{\"text\":\"URL Route Registrations\",\"link\":\"/python/flask/api_reference/url_route\"},{\"text\":\"View Function Options\",\"link\":\"/python/flask/api_reference/view_function\"},{\"text\":\"Command Line Interface\",\"link\":\"/python/flask/api_reference/cmd_line\"}]},{\"text\":\"Additional Notes\",\"collapsed\":true,\"items\":[{\"text\":\"Design Decisions in Flask\",\"link\":\"/python/flask/additional_note/design_decision\"},{\"text\":\"Flask Extension Development\",\"link\":\"/python/flask/additional_note/flask_extension\"},{\"text\":\"How to contribute to Flask\",\"link\":\"/python/flask/additional_note/contribute\"},{\"text\":\"BSD-3-Clause License\",\"link\":\"/python/flask/additional_note/license\"},{\"text\":\"Changes\",\"link\":\"/python/flask/additional_note/change\"}]}]}]},\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/huohuoren4/docs.git\"}]},\"locales\":{\"root\":{\"label\":\"English\"},\"zh\":{\"label\":\"简体中文\",\"link\":\"https://huohuoren4.github.io/docs/\"}},\"scrollOffset\":90,\"cleanUrls\":true}");</script>
    
  </body>
</html>