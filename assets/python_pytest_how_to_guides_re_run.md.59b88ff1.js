import{_ as s,o as n,c as a,X as l}from"./chunks/framework.6e839c56.js";const F=JSON.parse('{"title":"How to re-run failed tests and maintain state between test runs","description":"","frontmatter":{},"headers":[],"relativePath":"python/pytest/how_to_guides/re_run.md","filePath":"python/pytest/how_to_guides/re_run.md","lastUpdated":1692720083000}'),p={name:"python/pytest/how_to_guides/re_run.md"},o=l(`<h1 id="how-to-re-run-failed-tests-and-maintain-state-between-test-runs" tabindex="-1">How to re-run failed tests and maintain state between test runs <a class="header-anchor" href="#how-to-re-run-failed-tests-and-maintain-state-between-test-runs" aria-label="Permalink to &quot;How to re-run failed tests and maintain state between test runs {#how-to-re-run-failed-tests-and-maintain-state-between-test-runs}&quot;">​</a></h1><h2 id="usage" tabindex="-1">Usage <a class="header-anchor" href="#usage" aria-label="Permalink to &quot;Usage {#usage}&quot;">​</a></h2><p>The plugin provides two command line options to rerun failures from the last <code>pytest</code> invocation:</p><ul><li><p><code>--lf</code>, <code>--last-failed</code> - to only re-run the failures.</p></li><li><p><code>--ff</code>, <code>--failed-first</code> - to run the failures first and then the rest of the tests.</p></li></ul><p>For cleanup (usually not needed), a <code>--cache-clear</code> option allows to remove all cross-session cache contents ahead of a test run.</p><p>Other plugins may access the config.cache object to set/get json encodable values between <code>pytest</code> invocations.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>This plugin is enabled by default, but can be disabled if needed: see <a href="/python/pytest/how_to_guides/use_plugin#deactivating-unregistering-a-plugin-by-name">Deactivating / unregistering a plugin by name</a> (the internal name for this plugin is <code>cacheprovider</code>).</p></div><h2 id="rerunning-only-failures-or-failures-first" tabindex="-1">Rerunning only failures or failures first <a class="header-anchor" href="#rerunning-only-failures-or-failures-first" aria-label="Permalink to &quot;Rerunning only failures or failures first {#rerunning-only-failures-or-failures-first}&quot;">​</a></h2><p>First, let’s create 50 test invocation of which only 2 fail:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_50.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">mark</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">parametrize</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">i</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> range</span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">50</span><span style="color:#89DDFF;">))</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_num</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">i</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> i </span><span style="color:#89DDFF;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">(</span><span style="color:#F78C6C;">17</span><span style="color:#89DDFF;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">        pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fail</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">bad luck</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span></code></pre></div><p>If you run this for the first time you will see two failures:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span></span>
<span class="line"><span style="color:#82AAFF;">................</span><span style="color:#A6ACCD;">.F.</span><span style="color:#82AAFF;">.....</span><span style="color:#A6ACCD;">.F.</span><span style="color:#82AAFF;">.......................</span><span style="color:#A6ACCD;">                   [100%]</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num[</span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">@pytest.mark.parametrize(</span><span style="color:#FFCB6B;">&quot;i&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">range</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">50</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">i</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> (17, </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">):</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">           pytest.fail</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&quot;bad luck&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py:7:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num[</span><span style="color:#F78C6C;">25</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">@pytest.mark.parametrize(</span><span style="color:#FFCB6B;">&quot;i&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">range</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">50</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">i</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> (17, </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">):</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">           pytest.fail</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&quot;bad luck&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py:7:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_50.py::test_num[</span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_50.py::test_num[</span><span style="color:#F78C6C;">25</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"><span style="color:#FFCB6B;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span></span></code></pre></div><p>If you then run it with <code>--lf</code>:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--lf</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"><span style="color:#FFCB6B;">run-last-failure:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rerun</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">previous</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failures</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">FF</span><span style="color:#A6ACCD;">                                                        [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num[</span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">@pytest.mark.parametrize(</span><span style="color:#FFCB6B;">&quot;i&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">range</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">50</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">i</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> (17, </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">):</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">           pytest.fail</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&quot;bad luck&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py:7:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num[</span><span style="color:#F78C6C;">25</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">@pytest.mark.parametrize(</span><span style="color:#FFCB6B;">&quot;i&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">range</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">50</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">i</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> (17, </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">):</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">           pytest.fail</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&quot;bad luck&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py:7:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_50.py::test_num[</span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_50.py::test_num[</span><span style="color:#F78C6C;">25</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"><span style="color:#A6ACCD;">============================ </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=============================</span></span></code></pre></div><p>You have run only the two failing tests from the last run, while the 48 passing tests have not been run (“deselected”).</p><p>Now, if you run with the <code>--ff</code> option, all tests will be run but the first previous failures will be executed first (as can be seen from the series of <code>FF</code> and dots):</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--ff</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">collected</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">50</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">items</span></span>
<span class="line"><span style="color:#FFCB6B;">run-last-failure:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rerun</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">previous</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failures</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">first</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">FF................................................</span><span style="color:#A6ACCD;">        [100%]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num[</span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">17</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">@pytest.mark.parametrize(</span><span style="color:#FFCB6B;">&quot;i&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">range</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">50</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">i</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> (17, </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">):</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">           pytest.fail</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&quot;bad luck&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py:7:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed</span></span>
<span class="line"><span style="color:#FFCB6B;">_______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num[</span><span style="color:#F78C6C;">25</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">25</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">@pytest.mark.parametrize(</span><span style="color:#FFCB6B;">&quot;i&quot;</span><span style="color:#FFCB6B;">,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">range</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">50</span><span style="color:#89DDFF;">)</span><span style="color:#A6ACCD;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_num</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">i</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> </span><span style="color:#FFCB6B;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> (17, </span><span style="color:#F78C6C;">25</span><span style="color:#A6ACCD;">):</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">           pytest.fail</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">&quot;bad luck&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">           </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_50.py:7:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_50.py::test_num[</span><span style="color:#F78C6C;">17</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_50.py::test_num[</span><span style="color:#F78C6C;">25</span><span style="color:#C3E88D;">]</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Failed:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">bad</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">luck</span></span>
<span class="line"><span style="color:#A6ACCD;">======================= </span><span style="color:#F78C6C;">2</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed,</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">48</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">passed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=======================</span></span></code></pre></div><p>New <code>--nf</code>, <code>--new-first</code> options: run new tests first followed by the rest of the tests, in both cases tests are also sorted by the file modified time, with more recent files coming first.</p><h2 id="behavior-when-no-tests-failed-in-the-last-run" tabindex="-1">Behavior when no tests failed in the last run <a class="header-anchor" href="#behavior-when-no-tests-failed-in-the-last-run" aria-label="Permalink to &quot;Behavior when no tests failed in the last run {#behavior-when-no-tests-failed-in-the-last-run}&quot;">​</a></h2><p>When no tests failed in the last run, or when no cached <code>lastfailed</code> data was found, pytest can be configured either to run all of the tests or no tests, using the <code>--last-failed-no-failures</code> option, which takes one of the following values:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--last-failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--last-failed-no-failures</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">all</span><span style="color:#A6ACCD;">    </span><span style="color:#676E95;font-style:italic;"># run all tests (default behavior)</span></span>
<span class="line"><span style="color:#FFCB6B;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--last-failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--last-failed-no-failures</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">none</span><span style="color:#A6ACCD;">   </span><span style="color:#676E95;font-style:italic;"># run no tests and exit</span></span></code></pre></div><h2 id="the-new-config-cache-object" tabindex="-1">The new config.cache object <a class="header-anchor" href="#the-new-config-cache-object" aria-label="Permalink to &quot;The new config.cache object {#the-new-config-cache-object}&quot;">​</a></h2><p>Plugins or <code>conftest.py</code> support code can get a cached value using the pytest <code>config</code> object. Here is a basic example plugin which implements a fixture which re-uses previously created state across pytest invocations:</p><div class="language-python"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#676E95;font-style:italic;"># content of test_caching.py</span></span>
<span class="line"><span style="color:#89DDFF;font-style:italic;">import</span><span style="color:#A6ACCD;"> pytest</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">expensive_computation</span><span style="color:#89DDFF;">():</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#82AAFF;">print</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">running expensive computation...</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">)</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#89DDFF;">@</span><span style="color:#82AAFF;">pytest</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">fixture</span></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">mydata</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">request</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    val </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">cache</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">get</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">example/value</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> </span><span style="color:#89DDFF;">None)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">if</span><span style="color:#A6ACCD;"> val </span><span style="color:#89DDFF;">is</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">None:</span></span>
<span class="line"><span style="color:#A6ACCD;">        </span><span style="color:#82AAFF;">expensive_computation</span><span style="color:#89DDFF;">()</span></span>
<span class="line"><span style="color:#A6ACCD;">        val </span><span style="color:#89DDFF;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span></span>
<span class="line"><span style="color:#A6ACCD;">        request</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">config</span><span style="color:#89DDFF;">.</span><span style="color:#F07178;">cache</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">set</span><span style="color:#89DDFF;">(</span><span style="color:#89DDFF;">&quot;</span><span style="color:#C3E88D;">example/value</span><span style="color:#89DDFF;">&quot;</span><span style="color:#89DDFF;">,</span><span style="color:#82AAFF;"> val</span><span style="color:#89DDFF;">)</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#A6ACCD;"> val</span></span>
<span class="line"></span>
<span class="line"></span>
<span class="line"><span style="color:#C792EA;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">test_function</span><span style="color:#89DDFF;">(</span><span style="color:#A6ACCD;font-style:italic;">mydata</span><span style="color:#89DDFF;">):</span></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#89DDFF;font-style:italic;">assert</span><span style="color:#A6ACCD;"> mydata </span><span style="color:#89DDFF;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span></span></code></pre></div><p>If you run this command for the first time, you can see the print statement:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span></span>
<span class="line"><span style="color:#FFCB6B;">F</span><span style="color:#A6ACCD;">                                                                    [100%]</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_function</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">mydata</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_function</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">mydata</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert mydata == 23</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_caching.py:19:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#FFCB6B;">--------------------------</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Captured</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">stdout</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">setup</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---------------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">running</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">expensive</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">computation...</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_caching.py::test_function</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span></span>
<span class="line"><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span></span></code></pre></div><p>If you run it a second time, the value will be retrieved from the cache and nothing will be printed:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-q</span></span>
<span class="line"><span style="color:#FFCB6B;">F</span><span style="color:#A6ACCD;">                                                                    [100%]</span></span>
<span class="line"><span style="color:#A6ACCD;">================================= </span><span style="color:#C3E88D;">FAILURES</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=================================</span></span>
<span class="line"><span style="color:#FFCB6B;">______________________________</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_function</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">_______________________________</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">mydata</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">=</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">    </span><span style="color:#FFCB6B;">def</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_function</span><span style="color:#89DDFF;">(</span><span style="color:#FFCB6B;">mydata</span><span style="color:#89DDFF;">)</span><span style="color:#C3E88D;">:</span></span>
<span class="line"><span style="color:#89DDFF;">&gt;</span><span style="color:#A6ACCD;">       assert mydata == 23</span></span>
<span class="line"><span style="color:#FFCB6B;">E</span><span style="color:#A6ACCD;">       </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span></span>
<span class="line"></span>
<span class="line"><span style="color:#FFCB6B;">test_caching.py:19:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">AssertionError</span></span>
<span class="line"><span style="color:#A6ACCD;">========================= </span><span style="color:#C3E88D;">short</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">summary</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">info</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==========================</span></span>
<span class="line"><span style="color:#FFCB6B;">FAILED</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">test_caching.py::test_function</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">assert</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">42</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">==</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">23</span></span>
<span class="line"><span style="color:#FFCB6B;">1</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">failed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span></span></code></pre></div><p>See the <code>config.cache</code> fixture for more details.</p><h2 id="inspecting-cache-content" tabindex="-1">Inspecting Cache content <a class="header-anchor" href="#inspecting-cache-content" aria-label="Permalink to &quot;Inspecting Cache content {#inspecting-cache-content}&quot;">​</a></h2><p>You can always peek at the content of the cache using the <code>--cache-show</code> command line option:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--cache-show</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">cachedir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project/.pytest_cache</span></span>
<span class="line"><span style="color:#FFCB6B;">---------------------------</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cache</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">values</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">---------------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">cache/lastfailed</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">contains:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">{</span><span style="color:#FFCB6B;">&#39;test_caching.py::test_function&#39;</span><span style="color:#82AAFF;">:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">True}</span></span>
<span class="line"><span style="color:#FFCB6B;">cache/nodeids</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">contains:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">[</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">test_caching.py::test_function</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">]</span></span>
<span class="line"><span style="color:#FFCB6B;">cache/stepwise</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">contains:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#89DDFF;">[]</span></span>
<span class="line"><span style="color:#FFCB6B;">example/value</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">contains:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">42</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">========================== </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ran</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">===========================</span></span></code></pre></div><p><code>--cache-show</code> takes an optional argument to specify a glob pattern for filtering:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">$</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--cache-show</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">example/</span><span style="color:#A6ACCD;">*</span></span>
<span class="line"><span style="color:#A6ACCD;">=========================== </span><span style="color:#C3E88D;">test</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">session</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">starts</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">============================</span></span>
<span class="line"><span style="color:#FFCB6B;">platform</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">linux</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">Python</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">3</span><span style="color:#C3E88D;">.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pytest-7.x.y,</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">pluggy-1.x.y</span></span>
<span class="line"><span style="color:#FFCB6B;">rootdir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project</span></span>
<span class="line"><span style="color:#FFCB6B;">cachedir:</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">/home/sweet/project/.pytest_cache</span></span>
<span class="line"><span style="color:#FFCB6B;">-----------------------</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cache</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">values</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">for</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">example/*</span><span style="color:#89DDFF;">&#39;</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-----------------------</span></span>
<span class="line"><span style="color:#FFCB6B;">example/value</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">contains:</span></span>
<span class="line"><span style="color:#A6ACCD;">  </span><span style="color:#FFCB6B;">42</span></span>
<span class="line"></span>
<span class="line"><span style="color:#A6ACCD;">========================== </span><span style="color:#C3E88D;">no</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">tests</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">ran</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">in</span><span style="color:#A6ACCD;"> </span><span style="color:#F78C6C;">0.12</span><span style="color:#C3E88D;">s</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">===========================</span></span></code></pre></div><h2 id="clearing-cache-content" tabindex="-1">Clearing Cache content <a class="header-anchor" href="#clearing-cache-content" aria-label="Permalink to &quot;Clearing Cache content {#clearing-cache-content}&quot;">​</a></h2><p>You can instruct pytest to clear all cache files and values by adding the <code>--cache-clear</code> option like this:</p><div class="language-shell"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">pytest</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">--cache-clear</span></span></code></pre></div><p>This is recommended for invocations from Continuous Integration servers where isolation and correctness is more important than speed.</p><h2 id="stepwise" tabindex="-1">Stepwise <a class="header-anchor" href="#stepwise" aria-label="Permalink to &quot;Stepwise {#stepwise}&quot;">​</a></h2><p>As an alternative to <code>--lf -x</code>, especially for cases where you expect a large part of the test suite will fail, <code>--sw</code>, <code>--stepwise</code> allows you to fix them one at a time. The test suite will run until the first failure and then stop. At the next invocation, tests will continue from the last failing test and then run until the next failing test. You may use the <code>--stepwise-skip</code> option to ignore one failing test and stop the test execution on the second failing test instead. This is useful if you get stuck on a failing test and just want to ignore it until later. Providing <code>--stepwise-skip</code> will also enable <code>--stepwise</code> implicitly.</p>`,40),e=[o];function t(c,r,C,y,D,A){return n(),a("div",null,e)}const _=s(p,[["render",t]]);export{F as __pageData,_ as default};
