import{_ as s,o as e,c as a,Q as n}from"./chunks/framework.01af844e.js";const h=JSON.parse('{"title":"Customizing components with the kubeadm API","description":"","frontmatter":{},"headers":[],"relativePath":"container/k8s/get_started/prod_env/install/bootstrap/customize_component.md","filePath":"container/k8s/get_started/prod_env/install/bootstrap/customize_component.md","lastUpdated":1694607182000}'),o={name:"container/k8s/get_started/prod_env/install/bootstrap/customize_component.md"},l=n(`<h1 id="customizing-components-with-the-kubeadm-api" tabindex="-1">Customizing components with the kubeadm API <a class="header-anchor" href="#customizing-components-with-the-kubeadm-api" aria-label="Permalink to &quot;Customizing components with the kubeadm API&quot;">​</a></h1><p>This page covers how to customize the components that kubeadm deploys. For control plane components you can use flags in the <code>ClusterConfiguration</code> structure or patches per-node. For the kubelet and kube-proxy you can use <code>KubeletConfiguration</code> and <code>KubeProxyConfiguration</code>, accordingly.</p><p>All of these options are possible via the kubeadm configuration API. For more details on each field in the configuration you can navigate to our <a href="https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/" target="_blank" rel="noreferrer">API reference pages</a>.</p><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>Customizing the CoreDNS deployment of kubeadm is currently not supported. You must manually patch the <code>kube-system/coredns</code> ConfigMap and recreate the CoreDNS Pods after that. Alternatively, you can skip the default CoreDNS deployment and deploy your own variant. For more details on that see <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm-init/#init-phases" target="_blank" rel="noreferrer">Using init phases with kubeadm</a>.</p></div><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>To reconfigure a cluster that has already been created see <a href="https://kubernetes.io/docs/tasks/administer-cluster/kubeadm/kubeadm-reconfigure" target="_blank" rel="noreferrer">Reconfiguring a kubeadm cluster</a>.</p></div><h2 id="customizing-the-control-plane-with-flags-in-clusterconfiguration" tabindex="-1">Customizing the control plane with flags in ClusterConfiguration <a class="header-anchor" href="#customizing-the-control-plane-with-flags-in-clusterconfiguration" aria-label="Permalink to &quot;Customizing the control plane with flags in ClusterConfiguration&quot;">​</a></h2><p>The kubeadm <code>ClusterConfiguration</code> object exposes a way for users to override the default flags passed to control plane components such as the APIServer, ControllerManager, Scheduler and Etcd. The components are defined using the following structures:</p><ul><li><code>apiServer</code></li><li><code>controllerManager</code></li><li><code>scheduler</code></li><li><code>etcd</code></li></ul><p>These structures contain a common <code>extraArgs</code> field, that consists of <code>key: value</code> pairs. To override a flag for a control plane component:</p><ol><li>Add the appropriate <code>extraArgs</code> to your configuration.</li><li>Add flags to the <code>extraArgs</code> field.</li><li>Run <code>kubeadm init</code> with <code>--config &lt;YOUR CONFIG YAML&gt;</code>.</li></ol><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>You can generate a <code>ClusterConfiguration</code> object with default values by running <code>kubeadm config print init-defaults</code> and saving the output to a file of your choice.</p></div><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>The <code>ClusterConfiguration</code> object is currently global in kubeadm clusters. This means that any flags that you add, will apply to all instances of the same component on different nodes. To apply individual configuration per component on different nodes you can use <a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/control-plane-flags/#patches" target="_blank" rel="noreferrer">patches</a>.</p></div><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>Duplicate flags (keys), or passing the same flag <code>--foo</code> multiple times, is currently not supported. To workaround that you must use <a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/control-plane-flags/#patches" target="_blank" rel="noreferrer">patches</a>.</p></div><h3 id="apiserver-flags" tabindex="-1">APIServer flags <a class="header-anchor" href="#apiserver-flags" aria-label="Permalink to &quot;APIServer flags&quot;">​</a></h3><p>For details, see the <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-apiserver/" target="_blank" rel="noreferrer">reference documentation for kube-apiserver</a>.</p><p>Example usage:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#85E89D;">kubernetesVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1.16.0</span></span>
<span class="line"><span style="color:#85E89D;">apiServer</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">extraArgs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">anonymous-auth</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;false&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">enable-admission-plugins</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">AlwaysPullImages,DefaultStorageClass</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">audit-log-path</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/home/johndoe/audit.log</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#22863A;">kubernetesVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1.16.0</span></span>
<span class="line"><span style="color:#22863A;">apiServer</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">extraArgs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">anonymous-auth</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;false&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">enable-admission-plugins</span><span style="color:#24292E;">: </span><span style="color:#032F62;">AlwaysPullImages,DefaultStorageClass</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">audit-log-path</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/home/johndoe/audit.log</span></span></code></pre></div><h3 id="controllermanager-flags" tabindex="-1">ControllerManager flags <a class="header-anchor" href="#controllermanager-flags" aria-label="Permalink to &quot;ControllerManager flags&quot;">​</a></h3><p>For details, see the <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-controller-manager/" target="_blank" rel="noreferrer">reference documentation for kube-controller-manager</a>.</p><p>Example usage:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#85E89D;">kubernetesVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1.16.0</span></span>
<span class="line"><span style="color:#85E89D;">controllerManager</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">extraArgs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">cluster-signing-key-file</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/home/johndoe/keys/ca.key</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">deployment-controller-sync-period</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;50&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#22863A;">kubernetesVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1.16.0</span></span>
<span class="line"><span style="color:#22863A;">controllerManager</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">extraArgs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">cluster-signing-key-file</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/home/johndoe/keys/ca.key</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">deployment-controller-sync-period</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;50&quot;</span></span></code></pre></div><h3 id="scheduler-flags" tabindex="-1">Scheduler flags <a class="header-anchor" href="#scheduler-flags" aria-label="Permalink to &quot;Scheduler flags&quot;">​</a></h3><p>For details, see the <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kube-scheduler/" target="_blank" rel="noreferrer">reference documentation for kube-scheduler</a>.</p><p>Example usage:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#85E89D;">kubernetesVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">v1.16.0</span></span>
<span class="line"><span style="color:#85E89D;">scheduler</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">extraArgs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">config</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/etc/kubernetes/scheduler-config.yaml</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">extraVolumes</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    - </span><span style="color:#85E89D;">name</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">schedulerconfig</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">hostPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/home/johndoe/schedconfig.yaml</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">mountPath</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/etc/kubernetes/scheduler-config.yaml</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">readOnly</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">pathType</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;File&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#22863A;">kubernetesVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">v1.16.0</span></span>
<span class="line"><span style="color:#22863A;">scheduler</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">extraArgs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">config</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/etc/kubernetes/scheduler-config.yaml</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">extraVolumes</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    - </span><span style="color:#22863A;">name</span><span style="color:#24292E;">: </span><span style="color:#032F62;">schedulerconfig</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">hostPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/home/johndoe/schedconfig.yaml</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">mountPath</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/etc/kubernetes/scheduler-config.yaml</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">readOnly</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">pathType</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;File&quot;</span></span></code></pre></div><h3 id="etcd-flags" tabindex="-1">Etcd flags <a class="header-anchor" href="#etcd-flags" aria-label="Permalink to &quot;Etcd flags&quot;">​</a></h3><p>For details, see the <a href="https://etcd.io/docs/" target="_blank" rel="noreferrer">etcd server documentation</a>.</p><p>Example usage:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#85E89D;">etcd</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">local</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#85E89D;">extraArgs</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">      </span><span style="color:#85E89D;">election-timeout</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">1000</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">ClusterConfiguration</span></span>
<span class="line"><span style="color:#22863A;">etcd</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">local</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#22863A;">extraArgs</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">      </span><span style="color:#22863A;">election-timeout</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">1000</span></span></code></pre></div><h2 id="customizing-with-patches" tabindex="-1">Customizing with patches <a class="header-anchor" href="#customizing-with-patches" aria-label="Permalink to &quot;Customizing with patches&quot;">​</a></h2><p><em>FEATURE STATE</em>: <code>Kubernetes v1.22 [beta]</code></p><p>Kubeadm allows you to pass a directory with patch files to <code>InitConfiguration</code> and <code>JoinConfiguration</code> on individual nodes. These patches can be used as the last customization step before component configuration is written to disk.</p><p>You can pass this file to <code>kubeadm init</code> with <code>--config &lt;YOUR CONFIG YAML&gt;</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">InitConfiguration</span></span>
<span class="line"><span style="color:#85E89D;">patches</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">directory</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/home/user/somedir</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">InitConfiguration</span></span>
<span class="line"><span style="color:#22863A;">patches</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">directory</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/home/user/somedir</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>For <code>kubeadm init</code> you can pass a file containing both a <code>ClusterConfiguration</code> and <code>InitConfiguration</code> separated by ---.</p></div><p>You can pass this file to <code>kubeadm join</code> with <code>--config &lt;YOUR CONFIG YAML&gt;</code>:</p><div class="language-yaml vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">yaml</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#85E89D;">apiVersion</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#85E89D;">kind</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">JoinConfiguration</span></span>
<span class="line"><span style="color:#85E89D;">patches</span><span style="color:#E1E4E8;">:</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#85E89D;">directory</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">/home/user/somedir</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#22863A;">apiVersion</span><span style="color:#24292E;">: </span><span style="color:#032F62;">kubeadm.k8s.io/v1beta3</span></span>
<span class="line"><span style="color:#22863A;">kind</span><span style="color:#24292E;">: </span><span style="color:#032F62;">JoinConfiguration</span></span>
<span class="line"><span style="color:#22863A;">patches</span><span style="color:#24292E;">:</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#22863A;">directory</span><span style="color:#24292E;">: </span><span style="color:#032F62;">/home/user/somedir</span></span></code></pre></div><p>The directory must contain files named <code>target[suffix][+patchtype].extension</code>. For example, <code>kube-apiserver0+merge.yaml</code> or just <code>etcd.json</code>.</p><ul><li><code>target</code> can be one of <code>kube-apiserver</code>, <code>kube-controller-manager</code>, <code>kube-scheduler</code>, <code>etcd</code> and <code>kubeletconfiguration</code>.</li><li><code>patchtype</code> can be one of <code>strategic</code>, <code>merge</code> or <code>json</code> and these must match the patching formats <a href="https://kubernetes.io/docs/tasks/manage-kubernetes-objects/update-api-object-kubectl-patch" target="_blank" rel="noreferrer">supported by kubectl</a>. The default <code>patchtype</code> is <code>strategic</code>.</li><li>extension must be either <code>json</code> or <code>yaml</code>.</li><li><code>suffix</code> is an optional string that can be used to determine which patches are applied first alpha-numerically.</li></ul><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>If you are using <code>kubeadm upgrade</code> to upgrade your kubeadm nodes you must again provide the same patches, so that the customization is preserved after upgrade. To do that you can use the <code>--patches</code> flag, which must point to the same directory. <code>kubeadm upgrade</code> currently does not support a configuration API structure that can be used for the same purpose.</p></div><h2 id="customizing-the-kubelet" tabindex="-1">Customizing the kubelet <a class="header-anchor" href="#customizing-the-kubelet" aria-label="Permalink to &quot;Customizing the kubelet&quot;">​</a></h2><p>To customize the kubelet you can add a <a href="https://kubernetes.io/docs/reference/config-api/kubelet-config.v1beta1/" target="_blank" rel="noreferrer">KubeletConfiguration</a> next to the <code>ClusterConfiguration</code> or <code>InitConfiguration</code> separated by <code>---</code> within the same configuration file. This file can then be passed to <code>kubeadm init</code> and kubeadm will apply the same base <code>KubeletConfiguration</code> to all nodes in the cluster.</p><p>For applying instance-specific configuration over the base <code>KubeletConfiguration</code> you can use the <a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/control-plane-flags/#patches" target="_blank" rel="noreferrer">kubeletconfiguration patch target</a>.</p><p>Alternatively, you can use kubelet flags as overrides by passing them in the <code>nodeRegistration.kubeletExtraArgs</code> field supported by both <code>InitConfiguration</code> and <code>JoinConfiguration</code>. Some kubelet flags are deprecated, so check their status in the <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet" target="_blank" rel="noreferrer">kubelet reference documentation</a> before using them.</p><p>For additional details see <a href="https://kubernetes.io/docs/setup/production-environment/tools/kubeadm/kubelet-integration" target="_blank" rel="noreferrer">Configuring each kubelet in your cluster using kubeadm</a></p><h2 id="customizing-kube-proxy" tabindex="-1">Customizing kube-proxy <a class="header-anchor" href="#customizing-kube-proxy" aria-label="Permalink to &quot;Customizing kube-proxy&quot;">​</a></h2><p>To customize kube-proxy you can pass a <code>KubeProxyConfiguration</code> next your <code>ClusterConfiguration</code> or <code>InitConfiguration</code> to <code>kubeadm init</code> separated by <code>---</code>.</p><p>For more details you can navigate to our <a href="https://kubernetes.io/docs/reference/config-api/kubeadm-config.v1beta3/" target="_blank" rel="noreferrer">API reference pages</a>.</p><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>kubeadm deploys kube-proxy as a DaemonSet, which means that the <code>KubeProxyConfiguration</code> would apply to all instances of kube-proxy in the cluster.</p></div>`,49),t=[l];function p(r,c,i,d,u,y){return e(),a("div",null,t)}const g=s(o,[["render",p]]);export{h as __pageData,g as default};
