import{_ as s,o as a,c as e,Q as n}from"./chunks/framework.01af844e.js";const m=JSON.parse('{"title":"How to mark test functions with attributes","description":"","frontmatter":{},"headers":[],"relativePath":"python/pytest/how_to_guides/mark.md","filePath":"python/pytest/how_to_guides/mark.md","lastUpdated":1692720083000}'),t={name:"python/pytest/how_to_guides/mark.md"},o=n(`<h1 id="how-to-mark-test-functions-with-attributes" tabindex="-1">How to mark test functions with attributes <a class="header-anchor" href="#how-to-mark-test-functions-with-attributes" aria-label="Permalink to &quot;How to mark test functions with attributes {#how-to-mark-test-functions-with-attributes}&quot;">​</a></h1><p>By using the <code>pytest.mark</code> helper you can easily set metadata on your test functions. You can find the full list of builtin markers in the API Reference. Or you can list all the markers, including builtin and custom, using the CLI - <code>pytest --markers</code>.</p><p>Here are some of the builtin markers:</p><ul><li><a href="/python/pytest/how_to_guides/fixture#use-fixtures-in-classes-and-modules-with-usefixtures">usefixtures</a> - use fixtures on a test function or class</li><li><a href="/python/pytest/how_to_guides/warning#pytest-mark-filterwarnings">filterwarnings</a> - filter certain warnings of a test function</li><li><a href="/python/pytest/how_to_guides/skip_xfail#skipping-test-functions">skip</a> - always skip a test function</li><li><a href="/python/pytest/how_to_guides/skip_xfail#skipping-test-functions">skipif</a> - skip a test function if a certain condition is met</li><li><a href="/python/pytest/how_to_guides/skip_xfail#xfail-mark-test-functions-as-expected-to-fail">xfail</a> - produce an “expected failure” outcome if a certain condition is met</li><li><a href="/python/pytest/how_to_guides/params_fixture#pytest-mark-parametrize-parametrizing-test-functions">parametrize</a> - perform multiple calls to the same test function.</li></ul><p>It’s easy to create custom markers or to apply markers to whole test classes or modules. Those markers can be used by plugins, and also are commonly used to select tests on the command-line with the -m option.</p><p>See Working with custom markers for examples which also serve as documentation.</p><div class="tip custom-block"><p class="custom-block-title">Note</p><p>Marks can only be applied to tests, having no effect on <a href="/python/pytest/reference_guides/fixture_reference#fixtures-reference">fixtures</a>.</p></div><h2 id="registering-marks" tabindex="-1">Registering marks <a class="header-anchor" href="#registering-marks" aria-label="Permalink to &quot;Registering marks {#registering-marks}&quot;">​</a></h2><p>You can register custom marks in your <code>pytest.ini</code> file like this:</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">[pytest]</span></span>
<span class="line"><span style="color:#F97583;">markers</span><span style="color:#E1E4E8;"> =</span></span>
<span class="line"><span style="color:#E1E4E8;">    slow: marks tests as slow (deselect with </span><span style="color:#9ECBFF;">&#39;-m &quot;not slow&quot;&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    serial</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">[pytest]</span></span>
<span class="line"><span style="color:#D73A49;">markers</span><span style="color:#24292E;"> =</span></span>
<span class="line"><span style="color:#24292E;">    slow: marks tests as slow (deselect with </span><span style="color:#032F62;">&#39;-m &quot;not slow&quot;&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    serial</span></span></code></pre></div><p>or in your pyproject.toml file like this:</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">[tool.pytest.ini_options]</span></span>
<span class="line"><span style="color:#F97583;">markers</span><span style="color:#E1E4E8;"> = [</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;slow: marks tests as slow (deselect with &#39;-m \\&quot;</span><span style="color:#E1E4E8;">not slow\\</span><span style="color:#9ECBFF;">&quot;&#39;)&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;serial&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">[tool.pytest.ini_options]</span></span>
<span class="line"><span style="color:#D73A49;">markers</span><span style="color:#24292E;"> = [</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;slow: marks tests as slow (deselect with &#39;-m \\&quot;</span><span style="color:#24292E;">not slow\\</span><span style="color:#032F62;">&quot;&#39;)&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;serial&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">]</span></span></code></pre></div><p>Note that everything past the <code>:</code> after the mark name is an optional description.</p><p>Alternatively, you can register new markers programmatically in a <a href="http://localhost:8080/python/pytest/reference_guides/api_reference#initialization-hooks" target="_blank" rel="noreferrer">pytest_configure</a> hook:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">def</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">pytest_configure</span><span style="color:#E1E4E8;">(config):</span></span>
<span class="line"><span style="color:#E1E4E8;">    config.addinivalue_line(</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#9ECBFF;">&quot;markers&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;env(name): mark test to run only on named environment&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    )</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">def</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">pytest_configure</span><span style="color:#24292E;">(config):</span></span>
<span class="line"><span style="color:#24292E;">    config.addinivalue_line(</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#032F62;">&quot;markers&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;env(name): mark test to run only on named environment&quot;</span></span>
<span class="line"><span style="color:#24292E;">    )</span></span></code></pre></div><p>Registered marks appear in pytest’s help text and do not emit warnings (see the next section). It is recommended that third-party plugins always register their markers.</p><h2 id="raising-errors-on-unknown-marks" tabindex="-1">Raising errors on unknown marks <a class="header-anchor" href="#raising-errors-on-unknown-marks" aria-label="Permalink to &quot;Raising errors on unknown marks {#raising-errors-on-unknown-marks}&quot;">​</a></h2><p>Unregistered marks applied with the <code>@pytest.mark.name_of_the_mark</code> decorator will always emit a warning in order to avoid silently doing something surprising due to mistyped names. As described in the previous section, you can disable the warning for custom marks by registering them in your <code>pytest.ini</code> file or using a custom <code>pytest_configure</code> hook.</p><p>When the <code>--strict-markers</code> command-line flag is passed, any unknown marks applied with the <code>@pytest.mark.name_of_the_mark</code> decorator will trigger an error. You can enforce this validation in your project by adding <code>--strict-markers</code> to <code>addopts</code>:</p><div class="language-ini vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">ini</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">[pytest]</span></span>
<span class="line"><span style="color:#F97583;">addopts</span><span style="color:#E1E4E8;"> = --strict-markers</span></span>
<span class="line"><span style="color:#F97583;">markers</span><span style="color:#E1E4E8;"> =</span></span>
<span class="line"><span style="color:#E1E4E8;">    slow: marks tests as slow (deselect with </span><span style="color:#9ECBFF;">&#39;-m &quot;not slow&quot;&#39;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    serial</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">[pytest]</span></span>
<span class="line"><span style="color:#D73A49;">addopts</span><span style="color:#24292E;"> = --strict-markers</span></span>
<span class="line"><span style="color:#D73A49;">markers</span><span style="color:#24292E;"> =</span></span>
<span class="line"><span style="color:#24292E;">    slow: marks tests as slow (deselect with </span><span style="color:#032F62;">&#39;-m &quot;not slow&quot;&#39;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    serial</span></span></code></pre></div>`,20),l=[o];function p(r,i,c,d,u,y){return a(),e("div",null,l)}const k=s(t,[["render",p]]);export{m as __pageData,k as default};
