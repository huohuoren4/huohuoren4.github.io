import{_ as e,o as t,c as o,Q as a}from"./chunks/framework.01af844e.js";const y=JSON.parse('{"title":"Response Objects","description":"","frontmatter":{},"headers":[],"relativePath":"python/flask/api_reference/response_obj.md","filePath":"python/flask/api_reference/response_obj.md","lastUpdated":1692979908000}'),s={name:"python/flask/api_reference/response_obj.md"},n=a('<h1 id="response-objects" tabindex="-1">Response Objects <a class="header-anchor" href="#response-objects" aria-label="Permalink to &quot;Response Objects {#response-objects}&quot;">​</a></h1><h2 id="class-flask-response-response-none-status-none-headers-none-mimetype-none-content-type-none-direct-passthrough-false" tabindex="-1"><code>class</code> flask.Response(<code>response=None, status=None, headers=None, mimetype=None, content_type=None, direct_passthrough=False</code>) <a class="header-anchor" href="#class-flask-response-response-none-status-none-headers-none-mimetype-none-content-type-none-direct-passthrough-false" aria-label="Permalink to &quot;`class` flask.Response(`response=None, status=None, headers=None, mimetype=None, content_type=None, direct_passthrough=False`)&quot;">​</a></h2><p>The response object that is used by default in <code>Flask</code>. Works like the response object from Werkzeug but is set to have an <code>HTML</code> mimetype by default. Quite often you don’t have to create this object yourself because <code>make_response()</code> will take care of that for you.</p><p>If you want to replace the response object used you can subclass this and set <code>response_class</code> to your subclass.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 1.0</em>: <code>JSON</code> support is added to the response, like the request. This is useful when testing to get the test client response data as <code>JSON</code>.</p><p><em>Changed in version 1.0</em>: Added <code>max_cookie_size</code>.</p></details><ul><li><p><em>Parameters</em>:</p><ul><li><p><code>response (Iterable[str] | Iterable[bytes])</code> –</p></li><li><p><code>status (int | str | HTTPStatus | None)</code> –</p></li><li><p><code>headers (Headers)</code> –</p></li><li><p><code>mimetype (str | None)</code> –</p></li><li><p><code>content_type (str | None)</code> –</p></li><li><p><code>direct_passthrough (bool)</code> –</p></li></ul></li><li><h3 id="accept-ranges" tabindex="-1">accept_ranges <a class="header-anchor" href="#accept-ranges" aria-label="Permalink to &quot;accept_ranges&quot;">​</a></h3><p>The <code>Accept-Ranges</code> header. Even though the name would indicate that multiple values are supported, it must be one string token only.</p><p>The values <code>&#39;bytes&#39;</code> and <code>&#39;none&#39;</code> are common.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.7.</em></p></details></li><li><h3 id="property-access-control-allow-credentials-bool" tabindex="-1"><code>property</code> access_control_allow_credentials: <code>bool</code> <a class="header-anchor" href="#property-access-control-allow-credentials-bool" aria-label="Permalink to &quot;`property` access_control_allow_credentials: `bool`&quot;">​</a></h3><p>Whether credentials can be shared by the browser to JavaScript code. As part of the preflight request it indicates whether credentials can be used on the cross origin request.</p></li><li><h3 id="access-control-allow-headers" tabindex="-1">access_control_allow_headers <a class="header-anchor" href="#access-control-allow-headers" aria-label="Permalink to &quot;access_control_allow_headers&quot;">​</a></h3><p>Which headers can be sent with the cross origin request.</p></li><li><h3 id="access-control-allow-methods" tabindex="-1">access_control_allow_methods <a class="header-anchor" href="#access-control-allow-methods" aria-label="Permalink to &quot;access_control_allow_methods&quot;">​</a></h3><p>Which methods can be used for the cross origin request.</p></li><li><h3 id="access-control-allow-origin" tabindex="-1">access_control_allow_origin <a class="header-anchor" href="#access-control-allow-origin" aria-label="Permalink to &quot;access_control_allow_origin&quot;">​</a></h3><p>The origin or <code>‘*’</code> for any origin that may make cross origin requests.</p></li><li><h3 id="access-control-expose-headers" tabindex="-1">access_control_expose_headers <a class="header-anchor" href="#access-control-expose-headers" aria-label="Permalink to &quot;access_control_expose_headers&quot;">​</a></h3><p>Which headers can be shared by the browser to JavaScript code.</p></li><li><h3 id="access-control-max-age" tabindex="-1">access_control_max_age <a class="header-anchor" href="#access-control-max-age" aria-label="Permalink to &quot;access_control_max_age&quot;">​</a></h3><p>The maximum age in seconds the access control settings can be cached for.</p></li><li><h3 id="add-etag-overwrite-false-weak-false" tabindex="-1">add_etag(<code>overwrite=False, weak=False</code>) <a class="header-anchor" href="#add-etag-overwrite-false-weak-false" aria-label="Permalink to &quot;add_etag(`overwrite=False, weak=False`)&quot;">​</a></h3><p>Add an etag for the current response if there is none yet.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.0</em>: <code>SHA-1</code> is used to generate the value. <code>MD5</code> may not be available in some environments.</p></details><p><em>Parameters</em>:</p><ul><li><p><code>overwrite (bool)</code> –</p></li><li><p><code>weak (bool)</code> –</p></li></ul><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="age" tabindex="-1">age <a class="header-anchor" href="#age" aria-label="Permalink to &quot;age&quot;">​</a></h3><p>The Age response-header field conveys the sender’s estimate of the amount of time since the response (or its revalidation) was generated at the origin server.</p><p>Age values are non-negative decimal integers, representing time in seconds.</p></li><li><h3 id="property-allow-headerset" tabindex="-1"><code>property</code> allow: <code>HeaderSet</code> <a class="header-anchor" href="#property-allow-headerset" aria-label="Permalink to &quot;`property` allow: `HeaderSet`&quot;">​</a></h3><p>The Allow entity-header field lists the set of methods supported by the resource identified by the Request-URI. The purpose of this field is strictly to inform the recipient of valid methods associated with the resource. An Allow header field MUST be present in a <code>405</code> (Method Not Allowed) response.</p></li><li><h3 id="autocorrect-location-header-false" tabindex="-1">autocorrect_location_header = <code>False</code> <a class="header-anchor" href="#autocorrect-location-header-false" aria-label="Permalink to &quot;autocorrect_location_header = `False`&quot;">​</a></h3><p>If a redirect <code>Location</code> header is a relative URL, make it an absolute URL, including scheme and domain.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.1</em>: This is disabled by default, so responses will send relative redirects.</p><p><em>New in version 0.8.</em></p></details></li><li><h3 id="automatically-set-content-length-true" tabindex="-1">automatically_set_content_length = <code>True</code> <a class="header-anchor" href="#automatically-set-content-length-true" aria-label="Permalink to &quot;automatically_set_content_length = `True`&quot;">​</a></h3><p>Should this response object automatically set the content-length header if possible? This is true by default.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.8.</em></p></details></li><li><h3 id="property-cache-control-responsecachecontrol" tabindex="-1"><code>property</code> cache_control: <code>ResponseCacheControl</code> <a class="header-anchor" href="#property-cache-control-responsecachecontrol" aria-label="Permalink to &quot;`property` cache_control: `ResponseCacheControl`&quot;">​</a></h3><p>The <code>Cache-Control</code> general-header field is used to specify directives that MUST be obeyed by all caching mechanisms along the request/response chain.</p></li><li><h3 id="calculate-content-length" tabindex="-1">calculate_content_length() <a class="header-anchor" href="#calculate-content-length" aria-label="Permalink to &quot;calculate_content_length()&quot;">​</a></h3><p>Returns the content length if available or <code>None</code> otherwise.</p><p><em>Return type</em>: <code>int | None</code></p></li><li><h3 id="call-on-close-func" tabindex="-1">call_on_close(<code>func</code>) <a class="header-anchor" href="#call-on-close-func" aria-label="Permalink to &quot;call_on_close(`func`)&quot;">​</a></h3><p>Adds a function to the internal list of functions that should be called as part of closing down the response. Since 0.7 this function also returns the function that was passed so that this can be used as a decorator.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.6.</em></p></details><p><em>Parameters</em>:</p><ul><li><code>func (Callable[[], Any])</code> –</li></ul><p><em>Return type</em>: <code>Callable[[], Any]</code></p></li><li><h3 id="property-charset-str" tabindex="-1"><code>property</code> charset: <code>str</code> <a class="header-anchor" href="#property-charset-str" aria-label="Permalink to &quot;`property` charset: `str`&quot;">​</a></h3><p>The charset used to encode body and cookie data. Defaults to <code>UTF-8</code>.</p><p><em>Deprecated since version 2.3</em>: Will be removed in <code>Werkzeug</code> 3.0. Response data must always be <code>UTF-8</code>.</p></li><li><h3 id="close" tabindex="-1">close() <a class="header-anchor" href="#close" aria-label="Permalink to &quot;close()&quot;">​</a></h3><p>Close the wrapped response if possible. You can also use the object in a with statement which will automatically close it.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.9</em>: Can now be used in a <code>with</code> statement.</p></details><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="content-encoding" tabindex="-1">content_encoding <a class="header-anchor" href="#content-encoding" aria-label="Permalink to &quot;content_encoding&quot;">​</a></h3><p>The <code>Content-Encoding</code> entity-header field is used as a modifier to the media-type. When present, its value indicates what additional content codings have been applied to the entity-body, and thus what decoding mechanisms must be applied in order to obtain the media-type referenced by the <code>Content-Type</code> header field.</p></li><li><h3 id="property-content-language-headerset" tabindex="-1"><code>property</code> content_language: <code>HeaderSet</code> <a class="header-anchor" href="#property-content-language-headerset" aria-label="Permalink to &quot;`property` content_language: `HeaderSet`&quot;">​</a></h3><p>The <code>Content-Language</code> entity-header field describes the natural language(s) of the intended audience for the enclosed entity. Note that this might not be equivalent to all the languages used within the entity-body.</p></li><li><h3 id="content-length" tabindex="-1">content_length <a class="header-anchor" href="#content-length" aria-label="Permalink to &quot;content_length&quot;">​</a></h3><p>The <code>Content-Length</code> entity-header field indicates the size of the entity-body, in decimal number of <code>OCTETs</code>, sent to the recipient or, in the case of the <code>HEAD</code> method, the size of the entity-body that would have been sent had the request been a <code>GET</code>.</p></li><li><h3 id="content-location" tabindex="-1">content_location <a class="header-anchor" href="#content-location" aria-label="Permalink to &quot;content_location&quot;">​</a></h3><p>The <code>Content-Location</code> entity-header field MAY be used to supply the resource location for the entity enclosed in the message when that entity is accessible from a location separate from the requested resource’s URI.</p></li><li><h3 id="content-md5" tabindex="-1">content_md5 <a class="header-anchor" href="#content-md5" aria-label="Permalink to &quot;content_md5&quot;">​</a></h3><p>The <code>Content-MD5</code> entity-header field, as defined in <code>RFC 1864</code>, is an MD5 digest of the entity-body for the purpose of providing an end-to-end message integrity check (MIC) of the entity-body. (Note: a MIC is good for detecting accidental modification of the entity-body in transit, but is not proof against malicious attacks.)</p></li><li><h3 id="property-content-range-contentrange" tabindex="-1"><code>property</code> content_range: <code>ContentRange</code> <a class="header-anchor" href="#property-content-range-contentrange" aria-label="Permalink to &quot;`property` content_range: `ContentRange`&quot;">​</a></h3><p>The <code>Content-Range</code> header as a <code>ContentRange</code> object. Available even if the header is not set.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.7.</em></p></details></li><li><h3 id="property-content-security-policy-contentsecuritypolicy" tabindex="-1"><code>property</code> content_security_policy: <code>ContentSecurityPolicy</code> <a class="header-anchor" href="#property-content-security-policy-contentsecuritypolicy" aria-label="Permalink to &quot;`property` content_security_policy: `ContentSecurityPolicy`&quot;">​</a></h3><p>The <code>Content-Security-Policy</code> header as a <code>ContentSecurityPolicy</code> object. Available even if the header is not set.</p><p>The <code>Content-Security-Policy</code> header adds an additional layer of security to help detect and mitigate certain types of attacks.</p></li><li><h3 id="property-content-security-policy-report-only-contentsecuritypolicy" tabindex="-1"><code>property</code> content_security_policy_report_only: <code>ContentSecurityPolicy</code> <a class="header-anchor" href="#property-content-security-policy-report-only-contentsecuritypolicy" aria-label="Permalink to &quot;`property` content_security_policy_report_only: `ContentSecurityPolicy`&quot;">​</a></h3><p>The <code>Content-Security-policy-report-only</code> header as a ContentSecurityPolicy object. Available even if the header is not set.</p><p>The <code>Content-Security-Policy-Report-Only</code> header adds a <code>csp</code> policy that is not enforced but is reported thereby helping detect certain types of attacks.</p></li><li><h3 id="content-type" tabindex="-1">content_type <a class="header-anchor" href="#content-type" aria-label="Permalink to &quot;content_type&quot;">​</a></h3><p>The <code>Content-Type</code> entity-header field indicates the media type of the entity-body sent to the recipient or, in the case of the <code>HEAD</code> method, the media type that would have been sent had the request been a <code>GET</code>.</p></li><li><h3 id="cross-origin-embedder-policy" tabindex="-1">cross_origin_embedder_policy <a class="header-anchor" href="#cross-origin-embedder-policy" aria-label="Permalink to &quot;cross_origin_embedder_policy&quot;">​</a></h3><p>Prevents a document from loading any cross-origin resources that do not explicitly grant the document permission. Values must be a member of the <code>werkzeug.http.COEP</code> enum.</p></li><li><h3 id="cross-origin-opener-policy" tabindex="-1">cross_origin_opener_policy <a class="header-anchor" href="#cross-origin-opener-policy" aria-label="Permalink to &quot;cross_origin_opener_policy&quot;">​</a></h3><p>Allows control over sharing of browsing context group with cross-origin documents. Values must be a member of the <code>werkzeug.http.COOP</code> enum.</p></li><li><h3 id="property-data-bytes-str" tabindex="-1"><code>property</code> data: <code>bytes | str</code> <a class="header-anchor" href="#property-data-bytes-str" aria-label="Permalink to &quot;`property` data: `bytes | str`&quot;">​</a></h3><p>A descriptor that calls <code>get_data()</code> and <code>set_data()</code>.</p></li><li><h3 id="date" tabindex="-1">date <a class="header-anchor" href="#date" aria-label="Permalink to &quot;date&quot;">​</a></h3><p>The Date general-header field represents the date and time at which the message was originated, having the same semantics as orig-date in <code>RFC 822</code>.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.0</em>: The datetime object is timezone-aware.</p></details></li><li><h3 id="default-mimetype-str-none-text-html" tabindex="-1">default_mimetype: <code>str | None = &#39;text/html&#39;</code> <a class="header-anchor" href="#default-mimetype-str-none-text-html" aria-label="Permalink to &quot;default_mimetype: `str | None = &#39;text/html&#39;`&quot;">​</a></h3><p>the default mimetype if none is provided.</p></li><li><h3 id="default-status-200" tabindex="-1">default_status = <code>200</code> <a class="header-anchor" href="#default-status-200" aria-label="Permalink to &quot;default_status = `200`&quot;">​</a></h3><p>the default status if none is provided.</p></li><li><h3 id="delete-cookie-key-path-domain-none-secure-false-httponly-false-samesite-none" tabindex="-1">delete_cookie(<code>key, path=&#39;/&#39;, domain=None, secure=False, httponly=False, samesite=None</code>) <a class="header-anchor" href="#delete-cookie-key-path-domain-none-secure-false-httponly-false-samesite-none" aria-label="Permalink to &quot;delete_cookie(`key, path=&#39;/&#39;, domain=None, secure=False, httponly=False, samesite=None`)&quot;">​</a></h3><p>Delete a cookie. Fails silently if key doesn’t exist.</p><p><em>Parameters</em>:</p><ul><li><p><code>key (str)</code> – the key (name) of the cookie to be deleted.</p></li><li><p><code>path (str | None)</code> – if the cookie that should be deleted was limited to a path, the path has to be defined here.</p></li><li><p><code>domain (str | None)</code> – if the cookie that should be deleted was limited to a domain, that domain has to be defined here.</p></li><li><p><code>secure (bool)</code> – If <code>True</code>, the cookie will only be available via <code>HTTPS</code>.</p></li><li><p><code>httponly (bool)</code> – Disallow JavaScript access to the cookie.</p></li><li><p><code>samesite (str | None)</code> – Limit the scope of the cookie to only be attached to requests that are “same-site”.</p></li></ul><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="direct-passthrough" tabindex="-1">direct_passthrough <a class="header-anchor" href="#direct-passthrough" aria-label="Permalink to &quot;direct_passthrough&quot;">​</a></h3><p>Pass the response body directly through as the <code>WSGI</code> iterable. This can be used when the body is a binary file or other iterator of bytes, to skip some unnecessary checks. Use <code>send_file()</code> instead of setting this manually.</p></li><li><h3 id="expires" tabindex="-1">expires <a class="header-anchor" href="#expires" aria-label="Permalink to &quot;expires&quot;">​</a></h3><p>The Expires entity-header field gives the date/time after which the response is considered stale. A stale cache entry may not normally be returned by a cache.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.0</em>: The datetime object is timezone-aware.</p></details></li><li><h3 id="classmethod-force-type-response-environ-none" tabindex="-1"><code>classmethod</code> force_type(<code>response, environ=None</code>) <a class="header-anchor" href="#classmethod-force-type-response-environ-none" aria-label="Permalink to &quot;`classmethod` force_type(`response, environ=None`)&quot;">​</a></h3><p>Enforce that the <code>WSGI</code> response is a response object of the current type. Werkzeug will use the <code>Response</code> internally in many situations like the exceptions. If you call <code>get_response()</code> on an exception you will get back a regular <code>Response</code> object, even if you are using a custom subclass.</p><p>This method can enforce a given response type, and it will also convert arbitrary <code>WSGI</code> callables into response objects if an environ is provided:</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># convert a Werkzeug response object into an instance of the</span></span>\n<span class="line"><span style="color:#6A737D;"># MyResponseClass subclass.</span></span>\n<span class="line"><span style="color:#E1E4E8;">response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> MyResponseClass.force_type(response)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D;"># convert any WSGI application into a response object</span></span>\n<span class="line"><span style="color:#E1E4E8;">response </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> MyResponseClass.force_type(response, environ)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># convert a Werkzeug response object into an instance of the</span></span>\n<span class="line"><span style="color:#6A737D;"># MyResponseClass subclass.</span></span>\n<span class="line"><span style="color:#24292E;">response </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> MyResponseClass.force_type(response)</span></span>\n<span class="line"></span>\n<span class="line"><span style="color:#6A737D;"># convert any WSGI application into a response object</span></span>\n<span class="line"><span style="color:#24292E;">response </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> MyResponseClass.force_type(response, environ)</span></span></code></pre></div><p>This is especially useful if you want to post-process responses in the main dispatcher and use functionality provided by your subclass.</p><p>Keep in mind that this will modify response objects in place if possible!</p><p><em>Parameters</em>:</p><ul><li><p><code>response (Response)</code> – a response object or wsgi application.</p></li><li><p><code>environ (WSGIEnvironment | None)</code> – a <code>WSGI</code> environment object.</p></li></ul><p><em>Returns</em>: a response object.</p><p><em>Return type</em>: <code>Response</code></p></li><li><h3 id="freeze" tabindex="-1">freeze() <a class="header-anchor" href="#freeze" aria-label="Permalink to &quot;freeze()&quot;">​</a></h3><p>Make the response object ready to be pickled. Does the following:</p><ul><li><p>Buffer the response into a list, ignoring <code>implicity_sequence_conversion</code> and <code>direct_passthrough</code>.</p></li><li><p>Set the <code>Content-Length</code> header.</p></li><li><p>Generate an <code>ETag</code> header if one is not already set.</p></li></ul><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.1</em>: Removed the <code>no_etag</code> parameter.</p><p><em>Changed in version 2.0</em>: An <code>ETag</code> header is always added.</p><p><em>Changed in version 0.6</em>: The <code>Content-Length</code> header is set.</p></details><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="classmethod-from-app-app-environ-buffered-false" tabindex="-1">classmethod from_app(<code>app, environ, buffered=False</code>) <a class="header-anchor" href="#classmethod-from-app-app-environ-buffered-false" aria-label="Permalink to &quot;classmethod from_app(`app, environ, buffered=False`)&quot;">​</a></h3><p>Create a new response object from an application output. This works best if you pass it an application that returns a generator all the time. Sometimes applications may use the <code>write()</code> callable returned by the <code>start_response</code> function. This tries to resolve such edge cases automatically. But if you don’t get the expected output you should set buffered to <code>True</code> which enforces buffering.</p><p><em>Parameters</em>:</p><ul><li><p><code>app (WSGIApplication)</code> – the WSGI application to execute.</p></li><li><p><code>environ (WSGIEnvironment)</code> – the WSGI environment to execute against.</p></li><li><p><code>buffered (bool)</code> – set to True to enforce buffering.</p></li></ul><p><em>Returns</em>: a response object.</p><p><em>Return type</em>: <code>Response</code></p></li><li><h3 id="get-app-iter-environ" tabindex="-1">get_app_iter(<code>environ</code>) <a class="header-anchor" href="#get-app-iter-environ" aria-label="Permalink to &quot;get_app_iter(`environ`)&quot;">​</a></h3><p>Returns the application iterator for the given environ. Depending on the request method and the current status code the return value might be an empty response rather than the one from the response.</p><p>If the request method is <code>HEAD</code> or the status code is in a range where the <code>HTTP</code> specification requires an empty response, an empty iterable is returned.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.6.</em></p></details><p><em>Parameters</em>:</p><ul><li><code>environ (WSGIEnvironment)</code> – the <code>WSGI</code> environment of the request.</li></ul><p><em>Returns</em>: a response iterable.</p><p><em>Return type</em>: <code>t.Iterable[bytes]</code></p></li><li><h3 id="get-data-as-text-false" tabindex="-1">get_data(<code>as_text=False</code>) <a class="header-anchor" href="#get-data-as-text-false" aria-label="Permalink to &quot;get_data(`as_text=False`)&quot;">​</a></h3><p>The string representation of the response body. Whenever you call this property the response iterable is encoded and flattened. This can lead to unwanted behavior if you stream big data.</p><p>This behavior can be disabled by setting <code>implicit_sequence_conversion</code> to <code>False</code>.</p><p>If <code>as_text</code> is set to <code>True</code> the return value will be a decoded string.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.9.</em></p></details><p><em>Parameters</em>:</p><ul><li><code>as_text (bool)</code> –</li></ul><p><em>Return type</em>: <code>bytes | str</code></p></li><li><h3 id="get-etag" tabindex="-1">get_etag() <a class="header-anchor" href="#get-etag" aria-label="Permalink to &quot;get_etag()&quot;">​</a></h3><p>Return a tuple in the form <code>(etag, is_weak)</code>. If there is no <code>ETag</code> the return value is <code>(None, None)</code>.</p><p><em>Return type</em>: <code>tuple[str, bool] | tuple[None, None]</code></p></li><li><h3 id="get-json-force-false-silent-false" tabindex="-1">get_json(<code>force=False, silent=False</code>) <a class="header-anchor" href="#get-json-force-false-silent-false" aria-label="Permalink to &quot;get_json(`force=False, silent=False`)&quot;">​</a></h3><p>Parse <code>data</code> as <code>JSON</code>. Useful during testing.</p><p>If the mimetype does not indicate JSON (<code>application/json</code>, see <code>is_json</code>), this returns None.</p><p>Unlike <code>Request.get_json()</code>, the result is not cached.</p><p><em>Parameters</em>:</p><ul><li><p><code>force (bool)</code> – Ignore the mimetype and always try to parse <code>JSON</code>.</p></li><li><p><code>silent (bool)</code> – Silence parsing errors and return <code>None</code> instead.</p></li></ul><p><em>Return type</em>: <code>Any | None</code></p></li><li><h3 id="get-wsgi-headers-environ" tabindex="-1">get_wsgi_headers(<code>environ</code>) <a class="header-anchor" href="#get-wsgi-headers-environ" aria-label="Permalink to &quot;get_wsgi_headers(`environ`)&quot;">​</a></h3><p>This is automatically called right before the response is started and returns headers modified for the given environment. It returns a copy of the headers from the response with some modifications applied if necessary.</p><p>For example the location header (if present) is joined with the root URL of the environment. Also the content length is automatically set to zero here for certain status codes.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 0.6</em>: Previously that function was called <code>fix_headers</code> and modified the response object in place. Also since 0.6, IRIs in location and content-location headers are handled properly.</p><p>Also starting with 0.6, Werkzeug will attempt to set the content length if it is able to figure it out on its own. This is the case if all the strings in the response iterable are already encoded and the iterable is buffered.</p></details><p><em>Parameters</em>:</p><ul><li><code>environ (WSGIEnvironment)</code> – the <code>WSGI</code> environment of the request.</li></ul><p><em>Returns</em>: returns a new <code>Headers</code> object.</p><p><em>Return type</em>: <code>Headers</code></p></li><li><h3 id="get-wsgi-response-environ" tabindex="-1">get_wsgi_response(<code>environ</code>) <a class="header-anchor" href="#get-wsgi-response-environ" aria-label="Permalink to &quot;get_wsgi_response(`environ`)&quot;">​</a></h3><p>Returns the final WSGI response as tuple. The first item in the tuple is the application iterator, the second the status and the third the list of headers. The response returned is created specially for the given environment. For example if the request method in the WSGI environment is <code>&#39;HEAD&#39;</code> the response will be empty and only the headers and status code will be present.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.6.</em></p></details><p><em>Parameters</em>:</p><ul><li><code>environ (WSGIEnvironment)</code> – the <code>WSGI</code> environment of the request.</li></ul><p><em>Returns</em>: an <code>(app_iter, status, headers)</code> tuple.</p><p><em>Return type</em>: <code>tuple[t.Iterable[bytes], str, list[tuple[str, str]]]</code></p></li><li><h3 id="implicit-sequence-conversion-true" tabindex="-1">implicit_sequence_conversion = <code>True</code> <a class="header-anchor" href="#implicit-sequence-conversion-true" aria-label="Permalink to &quot;implicit_sequence_conversion = `True`&quot;">​</a></h3><p>if set to False accessing properties on the response object will not try to consume the response iterator and convert it into a list.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.6.2</em>: That attribute was previously called <code>implicit_seqence_conversion</code>. (Notice the typo). If you did use this feature, you have to adapt your code to the name change.</p></details></li><li><h3 id="property-is-json-bool" tabindex="-1"><code>property</code> is_json: <code>bool</code> <a class="header-anchor" href="#property-is-json-bool" aria-label="Permalink to &quot;`property` is_json: `bool`&quot;">​</a></h3><p>Check if the mimetype indicates JSON data, either <code>application/json</code> or <code>application/*+json</code>.</p></li><li><h3 id="property-is-sequence-bool" tabindex="-1"><code>property</code> is_sequence: <code>bool</code> <a class="header-anchor" href="#property-is-sequence-bool" aria-label="Permalink to &quot;`property` is_sequence: `bool`&quot;">​</a></h3><p>If the iterator is buffered, this property will be True. A response object will consider an iterator to be buffered if the response attribute is a list or tuple.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.6.</em></p></details></li><li><h3 id="property-is-streamed-bool" tabindex="-1"><code>property</code> is_streamed: <code>bool</code> <a class="header-anchor" href="#property-is-streamed-bool" aria-label="Permalink to &quot;`property` is_streamed: `bool`&quot;">​</a></h3><p>If the response is streamed (the response is not an iterable with a length information) this property is True. In this case streamed means that there is no information about the number of iterations. This is usually True if a generator is passed to the response object.</p><p>This is useful for checking before applying some sort of post filtering that should not take place for streamed responses.</p></li><li><h3 id="iter-encoded" tabindex="-1">iter_encoded() <a class="header-anchor" href="#iter-encoded" aria-label="Permalink to &quot;iter_encoded()&quot;">​</a></h3><p>Iter the response encoded with the encoding of the response. If the response object is invoked as WSGI application the return value of this method is used as application iterator unless <code>direct_passthrough</code> was activated.</p><p><em>Return type</em>: <code>Iterator[bytes]</code></p></li><li><h3 id="property-json-any-none" tabindex="-1"><code>property</code> json: <code>Any | None</code> <a class="header-anchor" href="#property-json-any-none" aria-label="Permalink to &quot;`property` json: `Any | None`&quot;">​</a></h3><p>The parsed JSON data if mimetype indicates JSON (<code>application/json</code>, see <code>is_json</code>).</p><p>Calls <code>get_json()</code> with default arguments.</p></li><li><h3 id="last-modified" tabindex="-1">last_modified <a class="header-anchor" href="#last-modified" aria-label="Permalink to &quot;last_modified&quot;">​</a></h3><p>The Last-Modified entity-header field indicates the date and time at which the origin server believes the variant was last modified.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.0</em>: The datetime object is timezone-aware.</p></details></li><li><h3 id="location" tabindex="-1">location <a class="header-anchor" href="#location" aria-label="Permalink to &quot;location&quot;">​</a></h3><p>The Location response-header field is used to redirect the recipient to a location other than the Request-URI for completion of the request or identification of a new resource.</p></li><li><h3 id="make-conditional-request-or-environ-accept-ranges-false-complete-length-none" tabindex="-1">make_conditional(<code>request_or_environ, accept_ranges=False, complete_length=None</code>) <a class="header-anchor" href="#make-conditional-request-or-environ-accept-ranges-false-complete-length-none" aria-label="Permalink to &quot;make_conditional(`request_or_environ, accept_ranges=False, complete_length=None`)&quot;">​</a></h3><p>Make the response conditional to the request. This method works best if an etag was defined for the response already. The add_etag method can be used to do that. If called without etag just the date header is set.</p><p>This does nothing if the request method in the request or environ is anything but <code>GET</code> or <code>HEAD</code>.</p><p>For optimal performance when handling range requests, it’s recommended that your response data object implements <code>seekable</code>, <code>seek</code> and <code>tell</code> methods as described by <code>io.IOBase</code>. Objects returned by <code>wrap_file()</code> automatically implement those methods.</p><p>It does not remove the body of the response because that’s something the <code>__call__()</code> function does for us automatically.</p><p>Returns self so that you can do return <code>resp.make_conditional(req)</code> but modifies the object in-place.</p><p><em>Parameters</em>:</p><ul><li><p><code>request_or_environ (WSGIEnvironment | Request)</code> – a request object or WSGI environment to be used to make the response conditional against.</p></li><li><p><code>accept_ranges (bool | str)</code> – This parameter dictates the value of Accept-Ranges header. If <code>False</code> (default), the header is not set. If <code>True</code>, it will be set to <code>&quot;bytes&quot;</code>. If it’s a string, it will use this value.</p></li><li><p><code>complete_length (int | None)</code> – Will be used only in valid Range Requests. It will set <code>Content-Range</code> complete length value and compute <code>Content-Length</code> real value. This parameter is mandatory for successful Range Requests completion.</p></li></ul><p><em>Raises</em>: <code>RequestedRangeNotSatisfiable</code> if <code>Range</code> header could not be parsed or satisfied.</p><p><em>Return type</em>: <code>Response</code></p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.0</em>: Range processing is skipped if length is 0 instead of raising a <code>416</code> Range Not Satisfiable error.</p></details></li><li><h3 id="make-sequence" tabindex="-1">make_sequence() <a class="header-anchor" href="#make-sequence" aria-label="Permalink to &quot;make_sequence()&quot;">​</a></h3><p>Converts the response iterator in a list. By default this happens automatically if required. If <code>implicit_sequence_conversion</code> is disabled, this method is not automatically called and some properties might raise exceptions. This also encodes all the items.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.6.</em></p></details><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="property-max-cookie-size-int" tabindex="-1"><code>property</code> max_cookie_size: <code>int</code> <a class="header-anchor" href="#property-max-cookie-size-int" aria-label="Permalink to &quot;`property` max_cookie_size: `int`&quot;">​</a></h3><p>Read-only view of the <code>MAX_COOKIE_SIZE</code> config key.</p><p>See <code>max_cookie_size</code> in Werkzeug’s docs.</p></li><li><h3 id="property-mimetype-str-none" tabindex="-1"><code>property</code> mimetype: <code>str | None</code> <a class="header-anchor" href="#property-mimetype-str-none" aria-label="Permalink to &quot;`property` mimetype: `str | None`&quot;">​</a></h3><p>The mimetype (content type without charset etc.)</p></li><li><h3 id="property-mimetype-params-dict-str-str" tabindex="-1"><code>property</code> mimetype_params: <code>dict[str, str]</code> <a class="header-anchor" href="#property-mimetype-params-dict-str-str" aria-label="Permalink to &quot;`property` mimetype_params: `dict[str, str]`&quot;">​</a></h3><p>The mimetype parameters as dict. For example if the content type is <code>text/html; charset=utf-8</code> the params would be <code>{&#39;charset&#39;: &#39;utf-8&#39;}</code>.</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.5.</em></p></details></li><li><h3 id="response-t-iterable-str-t-iterable-bytes" tabindex="-1">response: <code>t.Iterable[str] | t.Iterable[bytes]</code> <a class="header-anchor" href="#response-t-iterable-str-t-iterable-bytes" aria-label="Permalink to &quot;response: `t.Iterable[str] | t.Iterable[bytes]`&quot;">​</a></h3><p>The response body to send as the <code>WSGI</code> iterable. A list of strings or bytes represents a fixed-length response, any other iterable is a streaming response. Strings are encoded to bytes as <code>UTF-8</code>.</p><p>Do not set to a plain string or bytes, that will cause sending the response to be very inefficient as it will iterate one byte at a time.</p></li><li><h3 id="property-retry-after-datetime-none" tabindex="-1"><code>property</code> retry_after: <code>datetime | None</code> <a class="header-anchor" href="#property-retry-after-datetime-none" aria-label="Permalink to &quot;`property` retry_after: `datetime | None`&quot;">​</a></h3><p>The Retry-After response-header field can be used with a <code>503</code> (Service Unavailable) response to indicate how long the service is expected to be unavailable to the requesting client.</p><p>Time in seconds until expiration or date.</p><details class="details custom-block"><summary>Changelog</summary><p><em>Changed in version 2.0</em>: The datetime object is timezone-aware.</p></details></li><li><h3 id="set-cookie-key-value-max-age-none-expires-none-path-domain-none-secure-false-httponly-false-samesite-none" tabindex="-1">set_cookie(<code>key, value=&#39;&#39;, max_age=None, expires=None, path=&#39;/&#39;, domain=None, secure=False, httponly=False, samesite=None</code>) <a class="header-anchor" href="#set-cookie-key-value-max-age-none-expires-none-path-domain-none-secure-false-httponly-false-samesite-none" aria-label="Permalink to &quot;set_cookie(`key, value=&#39;&#39;, max_age=None, expires=None, path=&#39;/&#39;, domain=None, secure=False, httponly=False, samesite=None`)&quot;">​</a></h3><p>Sets a cookie.</p><p>A warning is raised if the size of the cookie header exceeds <code>max_cookie_size</code>, but the header will still be set.</p><p><em>Parameters</em>:</p><ul><li><p><code>key (str)</code> – the key (name) of the cookie to be set.</p></li><li><p><code>value (str)</code> – the value of the cookie.</p></li><li><p><code>max_age (timedelta | int | None)</code> – should be a number of seconds, or <code>None</code> (default) if the cookie should last only as long as the client’s browser session.</p></li><li><p><code>expires (str | datetime | int | float | None)</code> – should be a datetime object or <code>UNIX</code> timestamp.</p></li><li><p><code>path (str | None)</code> – limits the cookie to a given path, per default it will span the whole domain.</p></li><li><p><code>domain (str | None)</code> – if you want to set a cross-domain cookie. For example, <code>domain=&quot;.example.com&quot;</code> will set a cookie that is readable by the domain <code>www.example.com</code>, <code>foo.example.com</code> etc. Otherwise, a cookie will only be readable by the domain that set it.</p></li><li><p><code>secure (bool)</code> – If <code>True</code>, the cookie will only be available via <code>HTTPS</code>.</p></li><li><p><code>httponly (bool)</code> – Disallow <code>JavaScript</code> access to the cookie.</p></li><li><p><code>samesite (str | None)</code> – Limit the scope of the cookie to only be attached to requests that are “same-site”.</p></li></ul><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="set-data-value" tabindex="-1">set_data(<code>value</code>) <a class="header-anchor" href="#set-data-value" aria-label="Permalink to &quot;set_data(`value`)&quot;">​</a></h3><p>Sets a new string as response. The value must be a string or bytes. If a string is set it’s encoded to the charset of the response (<code>utf-8</code> by default).</p><details class="details custom-block"><summary>Changelog</summary><p><em>New in version 0.9.</em></p></details><p><em>Parameters</em>:</p><ul><li><code>value (bytes | str)</code> –</li></ul><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="set-etag-etag-weak-false" tabindex="-1">set_etag(<code>etag, weak=False</code>) <a class="header-anchor" href="#set-etag-etag-weak-false" aria-label="Permalink to &quot;set_etag(`etag, weak=False`)&quot;">​</a></h3><p>Set the etag, and override the old one if there was one.</p><p><em>Parameters</em>:</p><ul><li><p><code>etag (str)</code> –</p></li><li><p><code>weak (bool)</code> –</p></li></ul><p><em>Return type</em>: <code>None</code></p></li><li><h3 id="property-status-str" tabindex="-1"><code>property</code> status: <code>str</code> <a class="header-anchor" href="#property-status-str" aria-label="Permalink to &quot;`property` status: `str`&quot;">​</a></h3><p>The <code>HTTP</code> status code as a string.</p></li><li><h3 id="property-status-code-int" tabindex="-1"><code>property</code> status_code: <code>int</code> <a class="header-anchor" href="#property-status-code-int" aria-label="Permalink to &quot;`property` status_code: `int`&quot;">​</a></h3><p>The <code>HTTP</code> status code as a number.</p></li><li><h3 id="property-stream-responsestream" tabindex="-1"><code>property</code> stream: <code>ResponseStream</code> <a class="header-anchor" href="#property-stream-responsestream" aria-label="Permalink to &quot;`property` stream: `ResponseStream`&quot;">​</a></h3><p>The response iterable as write-only stream.</p></li><li><h3 id="property-vary-headerset" tabindex="-1"><code>property</code> vary: <code>HeaderSet</code> <a class="header-anchor" href="#property-vary-headerset" aria-label="Permalink to &quot;`property` vary: `HeaderSet`&quot;">​</a></h3><p>The Vary field value indicates the set of request-header fields that fully determines, while the response is fresh, whether a cache is permitted to use the response to reply to a subsequent request without revalidation.</p></li><li><h3 id="property-www-authenticate-wwwauthenticate" tabindex="-1"><code>property</code> www_authenticate: <code>WWWAuthenticate</code> <a class="header-anchor" href="#property-www-authenticate-wwwauthenticate" aria-label="Permalink to &quot;`property` www_authenticate: `WWWAuthenticate`&quot;">​</a></h3><p>The <code>WWW-Authenticate</code> header parsed into a <code>WWWAuthenticate</code> object. Modifying the object will modify the header value.</p><p>This header is not set by default. To set this header, assign an instance of <code>WWWAuthenticate</code> to this attribute.</p><div class="language-python vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">python</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">response.www_authenticate </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> WWWAuthenticate(</span></span>\n<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#9ECBFF;">&quot;basic&quot;</span><span style="color:#E1E4E8;">, {</span><span style="color:#9ECBFF;">&quot;realm&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;Authentication Required&quot;</span><span style="color:#E1E4E8;">}</span></span>\n<span class="line"><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">response.www_authenticate </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> WWWAuthenticate(</span></span>\n<span class="line"><span style="color:#24292E;">    </span><span style="color:#032F62;">&quot;basic&quot;</span><span style="color:#24292E;">, {</span><span style="color:#032F62;">&quot;realm&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;Authentication Required&quot;</span><span style="color:#24292E;">}</span></span>\n<span class="line"><span style="color:#24292E;">)</span></span></code></pre></div><p>Multiple values for this header can be sent to give the client multiple options. Assign a list to set multiple headers. However, modifying the items in the list will not automatically update the header values, and accessing this attribute will only ever return the first value.</p><p>To unset this header, assign <code>None</code> or use <code>del</code>.</p><p><em>Changed in version 2.3</em>: This attribute can be assigned to to set the header. A list can be assigned to set multiple header values. Use del to unset the header.</p><p><em>Changed in version 2.3</em>: <code>WWWAuthenticate</code> is no longer a <code>dict</code>. The <code>token</code> attribute was added for auth challenges that use a token instead of parameters.</p></li></ul>',6),i=[n];function r(c,l,d,p,h,u){return t(),o("div",null,i)}const b=e(s,[["render",r]]);export{y as __pageData,b as default};
