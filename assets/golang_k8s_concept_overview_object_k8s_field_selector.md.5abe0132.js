import{_ as e,o as s,c as a,Q as o}from"./chunks/framework.01af844e.js";const E=JSON.parse('{"title":"Field Selectors","description":"","frontmatter":{},"headers":[],"relativePath":"golang/k8s/concept/overview/object_k8s/field_selector.md","filePath":"golang/k8s/concept/overview/object_k8s/field_selector.md","lastUpdated":1693758126000}'),l={name:"golang/k8s/concept/overview/object_k8s/field_selector.md"},t=o('<h1 id="field-selectors" tabindex="-1">Field Selectors <a class="header-anchor" href="#field-selectors" aria-label="Permalink to &quot;Field Selectors&quot;">​</a></h1><p>Field selectors let you select Kubernetes <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/#kubernetes-objects" target="_blank" rel="noreferrer">objects</a> based on the value of one or more resource fields. Here are some examples of field selector queries:</p><ul><li><code>metadata.name=my-service</code></li><li><code>metadata.namespace!=default</code></li><li><code>status.phase=Pending</code></li></ul><p>This <code>kubectl</code> command selects all Pods for which the value of the <code>status.phase</code> field is Running:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--field-selector</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status.phase=Running</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--field-selector</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status.phase=Running</span></span></code></pre></div><div class="tip custom-block"><p class="custom-block-title">Note:</p><p>Field selectors are essentially resource filters. By default, no selectors/filters are applied, meaning that all resources of the specified type are selected. This makes the <code>kubectl</code> queries<code> kubectl get pods</code> and <code>kubectl get pods --field-selector &quot;&quot;</code> equivalent.</p></div><h2 id="supported-fields" tabindex="-1">Supported fields <a class="header-anchor" href="#supported-fields" aria-label="Permalink to &quot;Supported fields&quot;">​</a></h2><p>Supported field selectors vary by Kubernetes resource type. All resource types support the <code>metadata.name</code> and <code>metadata.namespace</code> fields. Using unsupported field selectors produces an error. For example:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">ingress</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--field-selector</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">foo.bar=baz</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">ingress</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--field-selector</span><span style="color:#24292E;"> </span><span style="color:#032F62;">foo.bar=baz</span></span></code></pre></div><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Error from server (BadRequest): Unable to find &quot;ingresses&quot; that match label selector &quot;&quot;, field selector &quot;foo.bar=baz&quot;: &quot;foo.bar&quot; is not a known field selector: only &quot;metadata.name&quot;, &quot;metadata.namespace&quot;</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">Error from server (BadRequest): Unable to find &quot;ingresses&quot; that match label selector &quot;&quot;, field selector &quot;foo.bar=baz&quot;: &quot;foo.bar&quot; is not a known field selector: only &quot;metadata.name&quot;, &quot;metadata.namespace&quot;</span></span></code></pre></div><h2 id="supported-operators" tabindex="-1">Supported operators <a class="header-anchor" href="#supported-operators" aria-label="Permalink to &quot;Supported operators&quot;">​</a></h2><p>You can use the <code>=</code>, <code>==</code>, and <code>!=</code> operators with field selectors (<code>=</code> and <code>==</code> mean the same thing). This <code>kubectl</code> command, for example, selects all Kubernetes Services that aren&#39;t in the <code>default</code> namespace:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">services</span><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">--all-namespaces</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--field-selector</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">metadata.namespace!=default</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">services</span><span style="color:#24292E;">  </span><span style="color:#005CC5;">--all-namespaces</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--field-selector</span><span style="color:#24292E;"> </span><span style="color:#032F62;">metadata.namespace!=default</span></span></code></pre></div><h2 id="chained-selectors" tabindex="-1">Chained selectors <a class="header-anchor" href="#chained-selectors" aria-label="Permalink to &quot;Chained selectors&quot;">​</a></h2><p>As with <a href="https://kubernetes.io/docs/concepts/overview/working-with-objects/labels" target="_blank" rel="noreferrer">label</a> and other selectors, field selectors can be chained together as a comma-separated list. This <code>kubectl</code> command selects all Pods for which the <code>status.phase</code> does not equal <code>Running</code> and the <code>spec.restartPolicy</code> field equals <code>Always</code>:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">pods</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--field-selector=status.phase!=Running,spec.restartPolicy=Always</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">pods</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--field-selector=status.phase!=Running,spec.restartPolicy=Always</span></span></code></pre></div><h2 id="multiple-resource-types" tabindex="-1">Multiple resource types <a class="header-anchor" href="#multiple-resource-types" aria-label="Permalink to &quot;Multiple resource types&quot;">​</a></h2><p>You can use field selectors across multiple resource types. This <code>kubectl</code> command selects all Statefulsets and Services that are not in the <code>default</code> namespace:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">kubectl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">get</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">statefulsets,services</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--all-namespaces</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--field-selector</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">metadata.namespace!=default</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">kubectl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">get</span><span style="color:#24292E;"> </span><span style="color:#032F62;">statefulsets,services</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--all-namespaces</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--field-selector</span><span style="color:#24292E;"> </span><span style="color:#032F62;">metadata.namespace!=default</span></span></code></pre></div>',19),n=[t];function p(c,r,d,i,u,h){return s(),a("div",null,n)}const b=e(l,[["render",p]]);export{E as __pageData,b as default};
